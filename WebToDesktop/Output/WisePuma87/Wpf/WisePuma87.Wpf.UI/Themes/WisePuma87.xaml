<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:WisePuma87.Wpf.UI.Controls">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/WisePuma87.Wpf.UI;component/Themes/WisePuma87Resources.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <Style TargetType="{x:Type controls:WisePuma87}">
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="Background" Value="{StaticResource WisePuma87.Brush.Background.Transparent}" />
        <Setter Property="BorderBrush" Value="{StaticResource WisePuma87.Brush.Border.Normal}" />
        <Setter Property="BorderThickness" Value="2" />
        <Setter Property="Foreground" Value="{StaticResource WisePuma87.Brush.Text.Normal}" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:WisePuma87}">
                    <StackPanel Orientation="Horizontal"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
                        <!-- Checkbox Icon Container -->
                        <Border x:Name="IconBorder"
                                Width="{StaticResource WisePuma87.Size.Icon}"
                                Height="{StaticResource WisePuma87.Size.Icon}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Background="{TemplateBinding Background}"
                                CornerRadius="10,6,10,6">
                            <!-- Checkmark Path -->
                            <Path x:Name="CheckmarkPath"
                                  Data="{StaticResource WisePuma87.Geometry.Checkmark}"
                                  Stroke="{StaticResource WisePuma87.Brush.Checkmark}"
                                  StrokeThickness="{StaticResource WisePuma87.Size.StrokeThickness}"
                                  StrokeStartLineCap="Round"
                                  StrokeEndLineCap="Round"
                                  StrokeLineJoin="Round"
                                  StrokeDashArray="24"
                                  StrokeDashOffset="24"
                                  Stretch="Uniform"
                                  Margin="4"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center" />
                        </Border>

                        <!-- Checkbox Text -->
                        <TextBlock x:Name="CheckboxText"
                                   Text="{TemplateBinding Text}"
                                   Foreground="{TemplateBinding Foreground}"
                                   FontSize="{TemplateBinding FontSize}"
                                   VerticalAlignment="Center"
                                   Margin="8,0,0,0" />
                    </StackPanel>

                    <ControlTemplate.Triggers>
                        <!-- Checked State Trigger -->
                        <Trigger Property="IsChecked" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <!-- Border color animation -->
                                        <ColorAnimation Storyboard.TargetName="IconBorder"
                                                        Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                        To="{StaticResource WisePuma87.Color.Primary}"
                                                        Duration="0:0:0.3">
                                            <ColorAnimation.EasingFunction>
                                                <CubicEase EasingMode="EaseOut" />
                                            </ColorAnimation.EasingFunction>
                                        </ColorAnimation>
                                        <!-- Background color animation -->
                                        <ColorAnimation Storyboard.TargetName="IconBorder"
                                                        Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                        To="{StaticResource WisePuma87.Color.Primary}"
                                                        Duration="0:0:0.3">
                                            <ColorAnimation.EasingFunction>
                                                <CubicEase EasingMode="EaseOut" />
                                            </ColorAnimation.EasingFunction>
                                        </ColorAnimation>
                                        <!-- CornerRadius animation (blob morphing effect) -->
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="IconBorder"
                                                                       Storyboard.TargetProperty="CornerRadius">
                                            <DiscreteObjectKeyFrame KeyTime="0:0:0.3">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <CornerRadius>6,10,6,10</CornerRadius>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <!-- Checkmark stroke-dashoffset animation -->
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="CheckmarkPath"
                                                                       Storyboard.TargetProperty="StrokeDashOffset">
                                            <SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="0" KeySpline="0.45,0.05,0.55,0.95" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <!-- Text color animation -->
                                        <ColorAnimation Storyboard.TargetName="CheckboxText"
                                                        Storyboard.TargetProperty="(TextBlock.Foreground).(SolidColorBrush.Color)"
                                                        To="{StaticResource WisePuma87.Color.Primary}"
                                                        Duration="0:0:0.3">
                                            <ColorAnimation.EasingFunction>
                                                <CubicEase EasingMode="EaseOut" />
                                            </ColorAnimation.EasingFunction>
                                        </ColorAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <!-- Border color animation (reverse) -->
                                        <ColorAnimation Storyboard.TargetName="IconBorder"
                                                        Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                        To="{StaticResource WisePuma87.Color.Border.Normal}"
                                                        Duration="0:0:0.3">
                                            <ColorAnimation.EasingFunction>
                                                <CubicEase EasingMode="EaseOut" />
                                            </ColorAnimation.EasingFunction>
                                        </ColorAnimation>
                                        <!-- Background color animation (reverse) -->
                                        <ColorAnimation Storyboard.TargetName="IconBorder"
                                                        Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                        To="Transparent"
                                                        Duration="0:0:0.3">
                                            <ColorAnimation.EasingFunction>
                                                <CubicEase EasingMode="EaseOut" />
                                            </ColorAnimation.EasingFunction>
                                        </ColorAnimation>
                                        <!-- CornerRadius animation (reverse) -->
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="IconBorder"
                                                                       Storyboard.TargetProperty="CornerRadius">
                                            <DiscreteObjectKeyFrame KeyTime="0:0:0.3">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <CornerRadius>10,6,10,6</CornerRadius>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <!-- Checkmark stroke-dashoffset animation (reverse) -->
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="CheckmarkPath"
                                                                       Storyboard.TargetProperty="StrokeDashOffset">
                                            <SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="24" KeySpline="0.45,0.05,0.55,0.95" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <!-- Text color animation (reverse) -->
                                        <ColorAnimation Storyboard.TargetName="CheckboxText"
                                                        Storyboard.TargetProperty="(TextBlock.Foreground).(SolidColorBrush.Color)"
                                                        To="{StaticResource WisePuma87.Color.Text.Normal}"
                                                        Duration="0:0:0.3">
                                            <ColorAnimation.EasingFunction>
                                                <CubicEase EasingMode="EaseOut" />
                                            </ColorAnimation.EasingFunction>
                                        </ColorAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.ExitActions>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
