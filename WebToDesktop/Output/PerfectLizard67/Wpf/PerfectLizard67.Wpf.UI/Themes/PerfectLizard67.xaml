<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:PerfectLizard67.Wpf.UI.Controls">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/PerfectLizard67.Wpf.UI;component/Themes/PerfectLizard67Resources.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <Style TargetType="{x:Type controls:PerfectLizard67}">
        <Setter Property="Background" Value="{StaticResource PerfectLizard67.Brush.Primary}" />
        <Setter Property="Foreground" Value="{StaticResource PerfectLizard67.Brush.Foreground}" />
        <Setter Property="BorderBrush" Value="{StaticResource PerfectLizard67.Brush.Primary}" />
        <Setter Property="BorderThickness" Value="0,0,0,0" />
        <Setter Property="FontSize" Value="{StaticResource PerfectLizard67.Size.FontSize}" />
        <Setter Property="FontFamily" Value="Trebuchet MS, Lucida Sans Unicode, Lucida Grande, Lucida Sans, Arial, sans-serif" />
        <Setter Property="Padding" Value="{StaticResource PerfectLizard67.Padding.Input}" />
        <Setter Property="Height" Value="{StaticResource PerfectLizard67.Size.Collapsed}" />
        <Setter Property="Width" Value="{StaticResource PerfectLizard67.Size.Collapsed}" />
        <Setter Property="CollapsedWidth" Value="{StaticResource PerfectLizard67.Size.Collapsed}" />
        <Setter Property="ExpandedWidth" Value="{StaticResource PerfectLizard67.Size.ExpandedWidth}" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="HorizontalContentAlignment" Value="Left" />
        <Setter Property="Cursor" Value="IBeam" />
        <Setter Property="CaretBrush" Value="{StaticResource PerfectLizard67.Brush.Foreground}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:PerfectLizard67}">
                    <Grid>
                        <!-- Main container / 메인 컨테이너 -->
                        <Border x:Name="PART_MainBorder"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="{StaticResource PerfectLizard67.CornerRadius.Collapsed}"
                                SnapsToDevicePixels="True">
                            <Border.Effect>
                                <DropShadowEffect x:Name="PART_Shadow"
                                                  Color="{StaticResource PerfectLizard67.Color.Shadow}"
                                                  BlurRadius="3"
                                                  ShadowDepth="0"
                                                  Opacity="1" />
                            </Border.Effect>

                            <Grid>
                                <!-- Text input area / 텍스트 입력 영역 -->
                                <ScrollViewer x:Name="PART_ContentHost"
                                              Margin="{TemplateBinding Padding}"
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              Focusable="False"
                                              HorizontalScrollBarVisibility="Hidden"
                                              VerticalScrollBarVisibility="Hidden" />

                                <!-- Placeholder text / 플레이스홀더 텍스트 -->
                                <TextBlock x:Name="PART_Placeholder"
                                           Text="search.."
                                           Foreground="{StaticResource PerfectLizard67.Brush.Placeholder}"
                                           FontSize="{TemplateBinding FontSize}"
                                           FontFamily="{TemplateBinding FontFamily}"
                                           Margin="{TemplateBinding Padding}"
                                           VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                           HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                           IsHitTestVisible="False"
                                           Visibility="Visible" />

                                <!-- Search icon button / 검색 아이콘 버튼 -->
                                <Button x:Name="PART_SearchButton"
                                        Width="{StaticResource PerfectLizard67.Size.IconButton}"
                                        Height="{StaticResource PerfectLizard67.Size.IconButton}"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Cursor="Hand"
                                        Focusable="False">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="Transparent">
                                                <Canvas Width="{StaticResource PerfectLizard67.Size.Icon}"
                                                        Height="{StaticResource PerfectLizard67.Size.Icon}">
                                                    <!-- Search circle / 검색 원 -->
                                                    <Path Data="{StaticResource PerfectLizard67.Geometry.SearchCircle}"
                                                          Stroke="{StaticResource PerfectLizard67.Brush.IconStroke}"
                                                          StrokeThickness="1.5"
                                                          StrokeLineJoin="Round"
                                                          StrokeStartLineCap="Round"
                                                          StrokeEndLineCap="Round"
                                                          Stretch="Uniform"
                                                          Width="20"
                                                          Height="20"
                                                          Canvas.Left="0"
                                                          Canvas.Top="0" />
                                                    <!-- Search handle / 검색 손잡이 -->
                                                    <Path Data="{StaticResource PerfectLizard67.Geometry.SearchHandle}"
                                                          Stroke="{StaticResource PerfectLizard67.Brush.IconStroke}"
                                                          StrokeThickness="1.5"
                                                          StrokeLineJoin="Round"
                                                          StrokeStartLineCap="Round"
                                                          StrokeEndLineCap="Round"
                                                          Stretch="Uniform"
                                                          Width="5"
                                                          Height="5"
                                                          Canvas.Left="18"
                                                          Canvas.Top="18" />
                                                </Canvas>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </Grid>
                        </Border>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <!-- Hide placeholder when there is text / 텍스트가 있으면 플레이스홀더 숨김 -->
                        <Trigger Property="Text" Value="">
                            <Setter TargetName="PART_Placeholder" Property="Visibility" Value="Visible" />
                        </Trigger>
                        <DataTrigger Binding="{Binding Text.Length, RelativeSource={RelativeSource Self}}" Value="0">
                            <Setter TargetName="PART_Placeholder" Property="Visibility" Value="Visible" />
                        </DataTrigger>
                        <Trigger Property="Text" Value="{x:Null}">
                            <Setter TargetName="PART_Placeholder" Property="Visibility" Value="Visible" />
                        </Trigger>

                        <!-- Expanded state / 확장 상태 -->
                        <Trigger Property="IsExpanded" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <!-- Width animation with bounce effect / 바운스 효과의 너비 애니메이션 -->
                                        <!-- CSS: cubic-bezier(0, 0.110, 0.35, 2) approximated with spline -->
                                        <DoubleAnimation Storyboard.TargetProperty="Width"
                                                         To="250"
                                                         Duration="0:0:0.5">
                                            <DoubleAnimation.EasingFunction>
                                                <BackEase Amplitude="0.3" EasingMode="EaseOut" />
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <!-- Collapse animation / 축소 애니메이션 -->
                                        <DoubleAnimation Storyboard.TargetProperty="Width"
                                                         To="50"
                                                         Duration="0:0:0.5">
                                            <DoubleAnimation.EasingFunction>
                                                <QuadraticEase EasingMode="EaseInOut" />
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.ExitActions>
                            <!-- Expanded style changes / 확장 시 스타일 변경 -->
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="BorderThickness" Value="0,0,0,3" />
                            <Setter TargetName="PART_MainBorder" Property="CornerRadius" Value="0" />
                            <Setter TargetName="PART_MainBorder" Property="Effect" Value="{x:Null}" />
                            <Setter TargetName="PART_Placeholder" Property="Visibility" Value="Collapsed" />
                        </Trigger>

                        <!-- Show placeholder in collapsed state with no text / 축소 상태에서 텍스트 없으면 플레이스홀더 표시 -->
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsExpanded" Value="False" />
                            </MultiTrigger.Conditions>
                            <Setter TargetName="PART_Placeholder" Property="Visibility" Value="Collapsed" />
                        </MultiTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
