<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:BitterSkunk14.Wpf.UI.Controls">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/BitterSkunk14.Wpf.UI;component/Themes/BitterSkunk14Resources.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <Style TargetType="{x:Type controls:BitterSkunk14}">
        <Setter Property="Width" Value="{StaticResource BitterSkunk14.Container.Width}"/>
        <Setter Property="Height" Value="{StaticResource BitterSkunk14.Container.Height}"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="FontStyle" Value="Oblique"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:BitterSkunk14}">
                    <Grid>
                        <!-- Tooltip Popup Area (positioned above the container) -->
                        <!-- 툴팁 팝업 영역 (컨테이너 위에 위치) -->
                        <Grid x:Name="PART_TooltipContainer"
                              VerticalAlignment="Top"
                              HorizontalAlignment="Center"
                              Margin="0,-135,0,0"
                              Opacity="0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Tooltip Box -->
                            <!-- 툴팁 박스 -->
                            <Border Grid.Row="0"
                                    Background="{StaticResource BitterSkunk14.Tooltip.Background}"
                                    CornerRadius="{StaticResource BitterSkunk14.Tooltip.CornerRadius}"
                                    Width="{StaticResource BitterSkunk14.Tooltip.Width}"
                                    Padding="{StaticResource BitterSkunk14.Tooltip.Padding}">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="{StaticResource BitterSkunk14.Tooltip.Shadow.BlurRadius}"
                                                      ShadowDepth="{StaticResource BitterSkunk14.Tooltip.Shadow.ShadowDepth}"
                                                      Opacity="{StaticResource BitterSkunk14.Tooltip.Shadow.Opacity}"
                                                      Color="{StaticResource BitterSkunk14.Tooltip.Shadow.Color}"/>
                                </Border.Effect>
                                <StackPanel>
                                    <!-- Tooltip Text -->
                                    <!-- 툴팁 텍스트 -->
                                    <TextBlock Text="{TemplateBinding TooltipText}"
                                               Foreground="{StaticResource BitterSkunk14.Tooltip.Foreground}"
                                               FontStyle="Oblique"
                                               Margin="0,0,0,10"/>

                                    <!-- Got It Button -->
                                    <!-- Got It 버튼 -->
                                    <Border Background="{StaticResource BitterSkunk14.Button.Background}"
                                            BorderBrush="{StaticResource BitterSkunk14.Button.BorderBrush}"
                                            BorderThickness="{StaticResource BitterSkunk14.Button.BorderThickness}"
                                            CornerRadius="{StaticResource BitterSkunk14.Button.CornerRadius}"
                                            Width="{StaticResource BitterSkunk14.Button.Width}"
                                            Height="{StaticResource BitterSkunk14.Button.Height}"
                                            HorizontalAlignment="Right"
                                            Cursor="Hand">
                                        <TextBlock Text="{TemplateBinding ButtonText}"
                                                   Foreground="{StaticResource BitterSkunk14.Button.Foreground}"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"/>
                                    </Border>
                                </StackPanel>
                            </Border>

                            <!-- Connector Line with Dot -->
                            <!-- 연결선과 점 -->
                            <Grid Grid.Row="1" HorizontalAlignment="Center">
                                <!-- Line (animated height) -->
                                <!-- 연결선 (높이 애니메이션) -->
                                <Rectangle x:Name="PART_Line"
                                           Width="{StaticResource BitterSkunk14.Line.Width}"
                                           Height="0"
                                           Fill="{StaticResource BitterSkunk14.Line.Background}"
                                           VerticalAlignment="Top"/>

                                <!-- Dot (::before pseudo-element) -->
                                <!-- 점 (::before 가상 요소) -->
                                <Ellipse x:Name="PART_Dot"
                                         Width="{StaticResource BitterSkunk14.Dot.Size}"
                                         Height="{StaticResource BitterSkunk14.Dot.Size}"
                                         Fill="{StaticResource BitterSkunk14.Dot.Background}"
                                         VerticalAlignment="Top"
                                         Margin="0,20,0,0"
                                         Opacity="0"/>
                            </Grid>
                        </Grid>

                        <!-- Main Container (tooltip-container) -->
                        <!-- 메인 컨테이너 -->
                        <Border x:Name="PART_Container"
                                Background="{StaticResource BitterSkunk14.Container.Background}"
                                CornerRadius="{StaticResource BitterSkunk14.Container.CornerRadius}"
                                VerticalAlignment="Bottom">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="{StaticResource BitterSkunk14.Container.Shadow.BlurRadius}"
                                                  ShadowDepth="{StaticResource BitterSkunk14.Container.Shadow.ShadowDepth}"
                                                  Opacity="{StaticResource BitterSkunk14.Container.Shadow.Opacity}"
                                                  Color="{StaticResource BitterSkunk14.Container.Shadow.Color}"
                                                  Direction="270"/>
                            </Border.Effect>

                            <!-- Trigger Text -->
                            <!-- 트리거 텍스트 -->
                            <TextBlock Text="{TemplateBinding TriggerText}"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"/>
                        </Border>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <!-- Hover Trigger: Show tooltip with animation -->
                        <!-- 호버 트리거: 애니메이션과 함께 툴팁 표시 -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <!-- Fade in tooltip -->
                                        <!-- 툴팁 페이드 인 -->
                                        <DoubleAnimation Storyboard.TargetName="PART_TooltipContainer"
                                                         Storyboard.TargetProperty="Opacity"
                                                         To="1"
                                                         Duration="0:0:0.3"/>

                                        <!-- Animate line height (HeightUP animation) -->
                                        <!-- 연결선 높이 애니메이션 -->
                                        <DoubleAnimation Storyboard.TargetName="PART_Line"
                                                         Storyboard.TargetProperty="Height"
                                                         From="0"
                                                         To="25"
                                                         Duration="0:0:0.4"/>

                                        <!-- Fade in dot with delay -->
                                        <!-- 점 페이드 인 (지연 적용) -->
                                        <DoubleAnimation Storyboard.TargetName="PART_Dot"
                                                         Storyboard.TargetProperty="Opacity"
                                                         To="1"
                                                         Duration="0:0:0.2"
                                                         BeginTime="0:0:0.3"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <!-- Fade out tooltip -->
                                        <!-- 툴팁 페이드 아웃 -->
                                        <DoubleAnimation Storyboard.TargetName="PART_TooltipContainer"
                                                         Storyboard.TargetProperty="Opacity"
                                                         To="0"
                                                         Duration="0:0:0.3"/>

                                        <!-- Reset line height -->
                                        <!-- 연결선 높이 초기화 -->
                                        <DoubleAnimation Storyboard.TargetName="PART_Line"
                                                         Storyboard.TargetProperty="Height"
                                                         To="0"
                                                         Duration="0:0:0.3"/>

                                        <!-- Fade out dot -->
                                        <!-- 점 페이드 아웃 -->
                                        <DoubleAnimation Storyboard.TargetName="PART_Dot"
                                                         Storyboard.TargetProperty="Opacity"
                                                         To="0"
                                                         Duration="0:0:0.1"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.ExitActions>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
