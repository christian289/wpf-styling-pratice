<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:FreshFrog39.Wpf.UI.Controls">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/FreshFrog39.Wpf.UI;component/Themes/FreshFrog39Resources.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <Style TargetType="{x:Type controls:FreshFrog39}">
        <Setter Property="Width" Value="{StaticResource FreshFrog39.ContainerSize}"/>
        <Setter Property="Height" Value="{StaticResource FreshFrog39.ContainerSize}"/>
        <Setter Property="DotColor" Value="{StaticResource FreshFrog39.DotColor}"/>
        <Setter Property="DotSize" Value="{StaticResource FreshFrog39.DotSize}"/>
        <Setter Property="DotGap" Value="{StaticResource FreshFrog39.DotGap}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:FreshFrog39}">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">

                        <!-- CSS: display: flex; justify-content: center; align-items: center; gap: var([gap]); -->
                        <StackPanel x:Name="PART_Container"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center">

                            <!-- 첫 번째 점 (span:nth-child(1)) -->
                            <!-- CSS: animation: fade 1s ease-in-out infinite; -->
                            <Ellipse x:Name="PART_Dot1"
                                     Width="{TemplateBinding DotSize}"
                                     Height="{TemplateBinding DotSize}"
                                     Fill="{TemplateBinding DotColor}"
                                     Opacity="0"/>

                            <!-- 두 번째 점 (span:nth-child(2)) -->
                            <!-- CSS: animation: fade 1s ease-in-out 0.33s infinite; -->
                            <Ellipse x:Name="PART_Dot2"
                                     Width="{TemplateBinding DotSize}"
                                     Height="{TemplateBinding DotSize}"
                                     Fill="{TemplateBinding DotColor}"
                                     Opacity="0"
                                     Margin="{TemplateBinding DotGap, Converter={x:Static controls:DoubleToLeftMarginConverter.Instance}}"/>

                            <!-- 세 번째 점 (span:nth-child(3)) -->
                            <!-- CSS: animation: fade 1s ease-in-out 0.66s infinite; -->
                            <Ellipse x:Name="PART_Dot3"
                                     Width="{TemplateBinding DotSize}"
                                     Height="{TemplateBinding DotSize}"
                                     Fill="{TemplateBinding DotColor}"
                                     Opacity="0"
                                     Margin="{TemplateBinding DotGap, Converter={x:Static controls:DoubleToLeftMarginConverter.Instance}}"/>
                        </StackPanel>
                    </Border>

                    <ControlTemplate.Triggers>
                        <!-- IsAnimating이 true일 때 애니메이션 실행 -->
                        <Trigger Property="IsAnimating" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard x:Name="FadeStoryboard">
                                    <Storyboard RepeatBehavior="Forever">
                                        <!--
                                        CSS @keyframes fade:
                                        0%, 100% { opacity: 1; }
                                        60% { opacity: 0; }
                                        -->

                                        <!-- 첫 번째 점: 딜레이 0s -->
                                        <DoubleAnimationUsingKeyFrames
                                            Storyboard.TargetName="PART_Dot1"
                                            Storyboard.TargetProperty="Opacity"
                                            BeginTime="0:0:0"
                                            Duration="0:0:1">
                                            <SplineDoubleKeyFrame KeyTime="0:0:0" Value="1"/>
                                            <SplineDoubleKeyFrame KeyTime="0:0:0.6" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="0:0:1" Value="1"/>
                                        </DoubleAnimationUsingKeyFrames>

                                        <!-- 두 번째 점: 딜레이 0.33s -->
                                        <DoubleAnimationUsingKeyFrames
                                            Storyboard.TargetName="PART_Dot2"
                                            Storyboard.TargetProperty="Opacity"
                                            BeginTime="0:0:0.33"
                                            Duration="0:0:1">
                                            <SplineDoubleKeyFrame KeyTime="0:0:0" Value="1"/>
                                            <SplineDoubleKeyFrame KeyTime="0:0:0.6" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="0:0:1" Value="1"/>
                                        </DoubleAnimationUsingKeyFrames>

                                        <!-- 세 번째 점: 딜레이 0.66s -->
                                        <DoubleAnimationUsingKeyFrames
                                            Storyboard.TargetName="PART_Dot3"
                                            Storyboard.TargetProperty="Opacity"
                                            BeginTime="0:0:0.66"
                                            Duration="0:0:1">
                                            <SplineDoubleKeyFrame KeyTime="0:0:0" Value="1"/>
                                            <SplineDoubleKeyFrame KeyTime="0:0:0.6" Value="0"/>
                                            <SplineDoubleKeyFrame KeyTime="0:0:1" Value="1"/>
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <StopStoryboard BeginStoryboardName="FadeStoryboard"/>
                            </Trigger.ExitActions>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
