<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:FreshMoth58.Wpf.UI.Controls">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/FreshMoth58.Wpf.UI;component/Themes/FreshMoth58Resources.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <Style TargetType="{x:Type controls:FreshMoth58}">
        <Setter Property="Width" Value="{StaticResource FreshMoth58.Container.Width}"/>
        <Setter Property="Height" Value="{StaticResource FreshMoth58.Container.Height}"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Background" Value="{StaticResource FreshMoth58.Container.Background}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:FreshMoth58}">
                    <Grid>
                        <!-- Outer shadow layers for neumorphism convex effect -->
                        <!-- Dark shadow (bottom-right): box-shadow: 9px 9px 29px #969696 -->
                        <Border CornerRadius="{StaticResource FreshMoth58.Container.CornerRadius}"
                                Background="{TemplateBinding Background}">
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource FreshMoth58.Shadow.Dark}"
                                                  BlurRadius="29"
                                                  ShadowDepth="9"
                                                  Direction="315"
                                                  Opacity="0.7"/>
                            </Border.Effect>
                        </Border>

                        <!-- Light shadow (top-left): box-shadow: -9px -9px 29px #ffffff -->
                        <Border CornerRadius="{StaticResource FreshMoth58.Container.CornerRadius}"
                                Background="{TemplateBinding Background}">
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource FreshMoth58.Shadow.Light}"
                                                  BlurRadius="29"
                                                  ShadowDepth="9"
                                                  Direction="135"
                                                  Opacity="0.9"/>
                            </Border.Effect>
                        </Border>

                        <!-- Main container -->
                        <Border x:Name="Container"
                                CornerRadius="{StaticResource FreshMoth58.Container.CornerRadius}"
                                Background="{TemplateBinding Background}">
                            <Grid>
                                <!-- Inner shadow track (inset shadow simulation) -->
                                <!-- box-shadow: inset 3px 3px 10px #969696, inset -3px -3px 5px #ffffffbd -->
                                <Border Margin="{StaticResource FreshMoth58.Track.Margin}"
                                        CornerRadius="{StaticResource FreshMoth58.Track.CornerRadius}">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#969696" Offset="0"/>
                                            <GradientStop Color="#C8C8C8" Offset="0.3"/>
                                            <GradientStop Color="#D3D3D3" Offset="0.5"/>
                                            <GradientStop Color="#E8E8E8" Offset="0.7"/>
                                            <GradientStop Color="#FFFFFF" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <!-- Inner fill to create inset shadow effect -->
                                    <Border Margin="2"
                                            CornerRadius="8"
                                            Background="{TemplateBinding Background}"/>
                                </Border>

                                <!-- Thumb (toggle knob) -->
                                <Border x:Name="Thumb"
                                        Width="{StaticResource FreshMoth58.Thumb.Size}"
                                        Height="{StaticResource FreshMoth58.Thumb.Size}"
                                        CornerRadius="{StaticResource FreshMoth58.Thumb.CornerRadius}"
                                        Background="{StaticResource FreshMoth58.Thumb.Background.Unchecked}"
                                        HorizontalAlignment="Left"
                                        VerticalAlignment="Center"
                                        Margin="{StaticResource FreshMoth58.Thumb.Margin}"
                                        RenderTransformOrigin="0.5,0.5">
                                    <Border.RenderTransform>
                                        <TransformGroup>
                                            <RotateTransform x:Name="ThumbRotation" Angle="0"/>
                                            <TranslateTransform x:Name="ThumbTranslation" X="0"/>
                                        </TransformGroup>
                                    </Border.RenderTransform>
                                </Border>
                            </Grid>
                        </Border>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <!-- Checked state: move right, rotate, change color -->
                        <Trigger Property="IsChecked" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <!-- Translate X: 0 → 30 -->
                                        <DoubleAnimation Storyboard.TargetName="ThumbTranslation"
                                                         Storyboard.TargetProperty="X"
                                                         To="{StaticResource FreshMoth58.Thumb.TranslateX.Checked}"
                                                         Duration="0:0:0.3">
                                            <DoubleAnimation.EasingFunction>
                                                <QuadraticEase EasingMode="EaseIn"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                        <!-- Rotate: 0 → 220 -->
                                        <DoubleAnimation Storyboard.TargetName="ThumbRotation"
                                                         Storyboard.TargetProperty="Angle"
                                                         To="{StaticResource FreshMoth58.Thumb.Rotation.Checked}"
                                                         Duration="0:0:0.3">
                                            <DoubleAnimation.EasingFunction>
                                                <QuadraticEase EasingMode="EaseIn"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                        <!-- Color change: orange → dark -->
                                        <ColorAnimation Storyboard.TargetName="Thumb"
                                                        Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                        To="#0A100D"
                                                        Duration="0:0:0.3">
                                            <ColorAnimation.EasingFunction>
                                                <QuadraticEase EasingMode="EaseIn"/>
                                            </ColorAnimation.EasingFunction>
                                        </ColorAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <!-- Translate X: 30 → 0 -->
                                        <DoubleAnimation Storyboard.TargetName="ThumbTranslation"
                                                         Storyboard.TargetProperty="X"
                                                         To="{StaticResource FreshMoth58.Thumb.TranslateX.Unchecked}"
                                                         Duration="0:0:0.3">
                                            <DoubleAnimation.EasingFunction>
                                                <QuadraticEase EasingMode="EaseIn"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                        <!-- Rotate: 220 → 0 -->
                                        <DoubleAnimation Storyboard.TargetName="ThumbRotation"
                                                         Storyboard.TargetProperty="Angle"
                                                         To="{StaticResource FreshMoth58.Thumb.Rotation.Unchecked}"
                                                         Duration="0:0:0.3">
                                            <DoubleAnimation.EasingFunction>
                                                <QuadraticEase EasingMode="EaseIn"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                        <!-- Color change: dark → orange -->
                                        <ColorAnimation Storyboard.TargetName="Thumb"
                                                        Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                        To="#FFAA00"
                                                        Duration="0:0:0.3">
                                            <ColorAnimation.EasingFunction>
                                                <QuadraticEase EasingMode="EaseIn"/>
                                            </ColorAnimation.EasingFunction>
                                        </ColorAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.ExitActions>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
