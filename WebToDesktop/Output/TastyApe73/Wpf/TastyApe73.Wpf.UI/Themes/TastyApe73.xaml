<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:TastyApe73.Wpf.UI.Controls"
                    xmlns:converters="clr-namespace:TastyApe73.Wpf.UI.Converters">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/TastyApe73.Wpf.UI;component/Themes/TastyApe73Resources.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <converters:SizeToRectConverter x:Key="SizeToRectConverter"/>
    <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>

    <Style TargetType="{x:Type controls:TastyApe73}">
        <Setter Property="Width" Value="200"/>
        <Setter Property="Height" Value="80"/>
        <Setter Property="FontFamily" Value="Courier New"/>
        <Setter Property="FontWeight" Value="Bold"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:TastyApe73}">
                    <Border x:Name="RootBorder"
                            Background="{StaticResource TastyApe73.Background}"
                            CornerRadius="{StaticResource TastyApe73.CornerRadius}"
                            Effect="{StaticResource TastyApe73.Shadow}"
                            RenderTransformOrigin="0.5,0.5">
                        <Border.Clip>
                            <RectangleGeometry RadiusX="{StaticResource TastyApe73.Border.Radius}"
                                               RadiusY="{StaticResource TastyApe73.Border.Radius}">
                                <RectangleGeometry.Rect>
                                    <MultiBinding Converter="{StaticResource SizeToRectConverter}">
                                        <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=Border}"/>
                                        <Binding Path="ActualHeight" RelativeSource="{RelativeSource AncestorType=Border}"/>
                                    </MultiBinding>
                                </RectangleGeometry.Rect>
                            </RectangleGeometry>
                        </Border.Clip>
                        <Border.RenderTransform>
                            <ScaleTransform x:Name="ScaleTransform" ScaleX="0" ScaleY="0"/>
                        </Border.RenderTransform>

                        <Grid>
                            <!-- Confetti Container -->
                            <!-- 컨페티 컨테이너 -->
                            <Canvas x:Name="ConfettiCanvas"
                                    IsHitTestVisible="False"
                                    Visibility="{Binding ShowConfetti, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BoolToVisibilityConverter}}">

                                <!-- Square confetti items -->
                                <!-- 정사각형 컨페티 -->
                                <Rectangle Canvas.Left="10" Canvas.Top="-30"
                                           Width="16" Height="16"
                                           Fill="{StaticResource TastyApe73.Confetti.Yellow}"
                                           RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="-140"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>

                                <Rectangle Canvas.Left="30" Canvas.Top="-50"
                                           Width="16" Height="16"
                                           Fill="{StaticResource TastyApe73.Confetti.White}"
                                           RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="-140"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>

                                <Rectangle Canvas.Left="55" Canvas.Top="-20"
                                           Width="16" Height="16"
                                           Fill="{StaticResource TastyApe73.Confetti.Purple}"
                                           RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="-140"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>

                                <Rectangle Canvas.Left="80" Canvas.Top="-40"
                                           Width="16" Height="16"
                                           Fill="{StaticResource TastyApe73.Confetti.Red}"
                                           RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="90"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>

                                <Rectangle Canvas.Left="105" Canvas.Top="-35"
                                           Width="16" Height="16"
                                           Fill="{StaticResource TastyApe73.Confetti.White}"
                                           RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="-140"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>

                                <Rectangle Canvas.Left="135" Canvas.Top="-25"
                                           Width="16" Height="16"
                                           Fill="{StaticResource TastyApe73.Confetti.Orange}"
                                           RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="90"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>

                                <Rectangle Canvas.Left="165" Canvas.Top="-45"
                                           Width="16" Height="16"
                                           Fill="{StaticResource TastyApe73.Confetti.Cyan}"
                                           RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="-140"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>

                                <!-- Rectangle confetti items -->
                                <!-- 직사각형 컨페티 -->
                                <Rectangle Canvas.Left="20" Canvas.Top="-60"
                                           Width="16" Height="8"
                                           Fill="{StaticResource TastyApe73.Confetti.Green}"/>

                                <Rectangle Canvas.Left="45" Canvas.Top="-15"
                                           Width="16" Height="8"
                                           Fill="{StaticResource TastyApe73.Confetti.Green}"
                                           RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="90"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>

                                <Rectangle Canvas.Left="70" Canvas.Top="-55"
                                           Width="16" Height="8"
                                           Fill="{StaticResource TastyApe73.Confetti.Pink}"/>

                                <Rectangle Canvas.Left="95" Canvas.Top="-25"
                                           Width="16" Height="8"
                                           Fill="{StaticResource TastyApe73.Confetti.Green}"
                                           RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="90"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>

                                <Rectangle Canvas.Left="120" Canvas.Top="-48"
                                           Width="16" Height="8"
                                           Fill="{StaticResource TastyApe73.Confetti.Pink}"/>

                                <Rectangle Canvas.Left="150" Canvas.Top="-35"
                                           Width="16" Height="8"
                                           Fill="{StaticResource TastyApe73.Confetti.Green}"
                                           RenderTransformOrigin="0.5,0.5">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="90"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>

                                <Rectangle Canvas.Left="175" Canvas.Top="-20"
                                           Width="16" Height="8"
                                           Fill="{StaticResource TastyApe73.Confetti.Green}"/>

                                <!-- Dodecagram (12-pointed star) confetti items -->
                                <!-- 12각형 별 컨페티 -->
                                <Grid Canvas.Left="15" Canvas.Top="-42" Width="12.8" Height="12.8">
                                    <Rectangle Fill="{StaticResource TastyApe73.Confetti.Yellow}" Width="12.8" Height="12.8"/>
                                    <Rectangle Fill="{StaticResource TastyApe73.Confetti.Yellow}" Width="12.8" Height="12.8" RenderTransformOrigin="0.5,0.5">
                                        <Rectangle.RenderTransform>
                                            <RotateTransform Angle="30"/>
                                        </Rectangle.RenderTransform>
                                    </Rectangle>
                                    <Rectangle Fill="{StaticResource TastyApe73.Confetti.Yellow}" Width="12.8" Height="12.8" RenderTransformOrigin="0.5,0.5">
                                        <Rectangle.RenderTransform>
                                            <RotateTransform Angle="60"/>
                                        </Rectangle.RenderTransform>
                                    </Rectangle>
                                </Grid>

                                <Grid Canvas.Left="60" Canvas.Top="-38" Width="12.8" Height="12.8">
                                    <Rectangle Fill="{StaticResource TastyApe73.Confetti.Red}" Width="12.8" Height="12.8"/>
                                    <Rectangle Fill="{StaticResource TastyApe73.Confetti.Red}" Width="12.8" Height="12.8" RenderTransformOrigin="0.5,0.5">
                                        <Rectangle.RenderTransform>
                                            <RotateTransform Angle="30"/>
                                        </Rectangle.RenderTransform>
                                    </Rectangle>
                                    <Rectangle Fill="{StaticResource TastyApe73.Confetti.Red}" Width="12.8" Height="12.8" RenderTransformOrigin="0.5,0.5">
                                        <Rectangle.RenderTransform>
                                            <RotateTransform Angle="60"/>
                                        </Rectangle.RenderTransform>
                                    </Rectangle>
                                </Grid>

                                <Grid Canvas.Left="100" Canvas.Top="-52" Width="12.8" Height="12.8">
                                    <Rectangle Fill="{StaticResource TastyApe73.Confetti.Yellow}" Width="12.8" Height="12.8"/>
                                    <Rectangle Fill="{StaticResource TastyApe73.Confetti.Yellow}" Width="12.8" Height="12.8" RenderTransformOrigin="0.5,0.5">
                                        <Rectangle.RenderTransform>
                                            <RotateTransform Angle="30"/>
                                        </Rectangle.RenderTransform>
                                    </Rectangle>
                                    <Rectangle Fill="{StaticResource TastyApe73.Confetti.Yellow}" Width="12.8" Height="12.8" RenderTransformOrigin="0.5,0.5">
                                        <Rectangle.RenderTransform>
                                            <RotateTransform Angle="60"/>
                                        </Rectangle.RenderTransform>
                                    </Rectangle>
                                </Grid>

                                <Grid Canvas.Left="145" Canvas.Top="-30" Width="12.8" Height="12.8">
                                    <Rectangle Fill="{StaticResource TastyApe73.Confetti.Red}" Width="12.8" Height="12.8"/>
                                    <Rectangle Fill="{StaticResource TastyApe73.Confetti.Red}" Width="12.8" Height="12.8" RenderTransformOrigin="0.5,0.5">
                                        <Rectangle.RenderTransform>
                                            <RotateTransform Angle="30"/>
                                        </Rectangle.RenderTransform>
                                    </Rectangle>
                                    <Rectangle Fill="{StaticResource TastyApe73.Confetti.Red}" Width="12.8" Height="12.8" RenderTransformOrigin="0.5,0.5">
                                        <Rectangle.RenderTransform>
                                            <RotateTransform Angle="60"/>
                                        </Rectangle.RenderTransform>
                                    </Rectangle>
                                </Grid>

                                <Grid Canvas.Left="180" Canvas.Top="-55" Width="12.8" Height="12.8">
                                    <Rectangle Fill="{StaticResource TastyApe73.Confetti.Yellow}" Width="12.8" Height="12.8"/>
                                    <Rectangle Fill="{StaticResource TastyApe73.Confetti.Yellow}" Width="12.8" Height="12.8" RenderTransformOrigin="0.5,0.5">
                                        <Rectangle.RenderTransform>
                                            <RotateTransform Angle="30"/>
                                        </Rectangle.RenderTransform>
                                    </Rectangle>
                                    <Rectangle Fill="{StaticResource TastyApe73.Confetti.Yellow}" Width="12.8" Height="12.8" RenderTransformOrigin="0.5,0.5">
                                        <Rectangle.RenderTransform>
                                            <RotateTransform Angle="60"/>
                                        </Rectangle.RenderTransform>
                                    </Rectangle>
                                </Grid>

                            </Canvas>

                            <!-- Text Content -->
                            <!-- 텍스트 내용 -->
                            <TextBlock x:Name="LevelUpText"
                                       Text="{TemplateBinding NotificationText}"
                                       Foreground="{StaticResource TastyApe73.Text.Foreground}"
                                       FontSize="{StaticResource TastyApe73.Text.FontSize}"
                                       FontFamily="{TemplateBinding FontFamily}"
                                       FontWeight="{TemplateBinding FontWeight}"
                                       Padding="{StaticResource TastyApe73.Text.Padding}"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center">
                                <TextBlock.Effect>
                                    <DropShadowEffect Color="Black"
                                                      ShadowDepth="2"
                                                      Direction="315"
                                                      BlurRadius="0"/>
                                </TextBlock.Effect>
                            </TextBlock>

                        </Grid>

                    </Border>

                    <ControlTemplate.Triggers>
                        <!-- Scale-up animation on load -->
                        <!-- 로드 시 스케일 업 애니메이션 -->
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetName="ScaleTransform"
                                                     Storyboard.TargetProperty="ScaleX"
                                                     From="0" To="1"
                                                     Duration="0:0:1.5">
                                        <DoubleAnimation.EasingFunction>
                                            <QuadraticEase EasingMode="EaseInOut"/>
                                        </DoubleAnimation.EasingFunction>
                                    </DoubleAnimation>
                                    <DoubleAnimation Storyboard.TargetName="ScaleTransform"
                                                     Storyboard.TargetProperty="ScaleY"
                                                     From="0" To="1"
                                                     Duration="0:0:1.5">
                                        <DoubleAnimation.EasingFunction>
                                            <QuadraticEase EasingMode="EaseInOut"/>
                                        </DoubleAnimation.EasingFunction>
                                    </DoubleAnimation>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>

                        <!-- Confetti fall animation on hover -->
                        <!-- 호버 시 컨페티 떨어지는 애니메이션 -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard x:Name="ConfettiStoryboard">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ConfettiCanvas"
                                                         Storyboard.TargetProperty="(Canvas.Top)"
                                                         From="0" To="100"
                                                         Duration="0:0:0.5">
                                            <DoubleAnimation.EasingFunction>
                                                <QuadraticEase EasingMode="EaseInOut"/>
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <StopStoryboard BeginStoryboardName="ConfettiStoryboard"/>
                            </Trigger.ExitActions>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
