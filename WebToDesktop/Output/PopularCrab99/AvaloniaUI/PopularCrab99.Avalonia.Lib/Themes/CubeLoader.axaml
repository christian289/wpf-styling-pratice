<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="using:PopularCrab99.Avalonia.Lib.Controls">

    <!-- Colors -->
    <Color x:Key="CubeLoader.Cube1.Color">#9E88F6</Color>
    <Color x:Key="CubeLoader.Cube2.Color">#61B7FD</Color>
    <Color x:Key="CubeLoader.Cube3.Color">#5FF9AF</Color>
    <Color x:Key="CubeLoader.Cube4.Color">#F3AB59</Color>

    <ControlTheme x:Key="{x:Type controls:CubeLoader}" TargetType="controls:CubeLoader">
        <Setter Property="Width" Value="120"/>
        <Setter Property="Height" Value="120"/>
        <Setter Property="Template">
            <ControlTemplate>
                <Panel>
                    <!-- Cube 1 - Purple (starts top-left) -->
                    <Border x:Name="Cube1"
                            Width="30" Height="30"
                            Background="{StaticResource CubeLoader.Cube1.Color}"
                            BoxShadow="0 7 29 0 #9E88F6">
                        <Border.RenderTransform>
                            <TranslateTransform X="-30" Y="-30"/>
                        </Border.RenderTransform>
                    </Border>

                    <!-- Cube 2 - Blue (starts top-right) -->
                    <Border x:Name="Cube2"
                            Width="30" Height="30"
                            Background="{StaticResource CubeLoader.Cube2.Color}"
                            BoxShadow="0 7 29 0 #61B7FD">
                        <Border.RenderTransform>
                            <TranslateTransform X="30" Y="-30"/>
                        </Border.RenderTransform>
                    </Border>

                    <!-- Cube 3 - Green (starts bottom-right) -->
                    <Border x:Name="Cube3"
                            Width="30" Height="30"
                            Background="{StaticResource CubeLoader.Cube3.Color}"
                            BoxShadow="0 7 29 0 #5FF9AF">
                        <Border.RenderTransform>
                            <TranslateTransform X="30" Y="30"/>
                        </Border.RenderTransform>
                    </Border>

                    <!-- Cube 4 - Orange (starts bottom-left) -->
                    <Border x:Name="Cube4"
                            Width="30" Height="30"
                            Background="{StaticResource CubeLoader.Cube4.Color}"
                            BoxShadow="0 7 29 0 #F3AB59">
                        <Border.RenderTransform>
                            <TranslateTransform X="-30" Y="30"/>
                        </Border.RenderTransform>
                    </Border>
                </Panel>
            </ControlTemplate>
        </Setter>

        <!-- Animation when IsRunning is true -->
        <Style Selector="^[IsRunning=True] /template/ Border#Cube1">
            <Style.Animations>
                <Animation Duration="0:0:4" IterationCount="Infinite">
                    <KeyFrame Cue="0%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="-30" Y="-30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="25%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="30" Y="-30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="50%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="30" Y="30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="75%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="-30" Y="30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="-30" Y="-30"/>
                        </Setter>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <Style Selector="^[IsRunning=True] /template/ Border#Cube2">
            <Style.Animations>
                <Animation Duration="0:0:4" IterationCount="Infinite" Delay="0:0:1">
                    <KeyFrame Cue="0%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="-30" Y="-30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="25%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="30" Y="-30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="50%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="30" Y="30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="75%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="-30" Y="30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="-30" Y="-30"/>
                        </Setter>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <Style Selector="^[IsRunning=True] /template/ Border#Cube3">
            <Style.Animations>
                <Animation Duration="0:0:4" IterationCount="Infinite" Delay="0:0:2">
                    <KeyFrame Cue="0%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="-30" Y="-30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="25%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="30" Y="-30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="50%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="30" Y="30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="75%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="-30" Y="30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="-30" Y="-30"/>
                        </Setter>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <Style Selector="^[IsRunning=True] /template/ Border#Cube4">
            <Style.Animations>
                <Animation Duration="0:0:4" IterationCount="Infinite" Delay="0:0:3">
                    <KeyFrame Cue="0%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="-30" Y="-30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="25%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="30" Y="-30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="50%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="30" Y="30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="75%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="-30" Y="30"/>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="RenderTransform">
                            <TranslateTransform X="-30" Y="-30"/>
                        </Setter>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

    </ControlTheme>

</ResourceDictionary>
