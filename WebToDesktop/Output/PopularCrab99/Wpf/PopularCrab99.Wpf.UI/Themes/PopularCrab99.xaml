<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:PopularCrab99.Wpf.UI.Controls">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/PopularCrab99.Wpf.UI;component/Themes/PopularCrab99Resources.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <Style TargetType="{x:Type controls:PopularCrab99}">
        <Setter Property="Width" Value="{StaticResource PopularCrab99.Container.Width}" />
        <Setter Property="Height" Value="{StaticResource PopularCrab99.Container.Height}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:PopularCrab99}">
                    <Grid>
                        <!-- Box 1 - Purple (top-left start, animation-delay: -1s = 25% offset) -->
                        <!-- 박스 1 - 보라색 (좌상단 시작, 1초 지연 = 25% 오프셋) -->
                        <Border x:Name="Box1"
                                Width="{StaticResource PopularCrab99.Box.Size}"
                                Height="{StaticResource PopularCrab99.Box.Size}"
                                Background="{StaticResource PopularCrab99.Box1.Background}"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                RenderTransformOrigin="0.5,0.5">
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource PopularCrab99.Box1.Color}"
                                                  BlurRadius="{StaticResource PopularCrab99.Shadow.BlurRadius}"
                                                  Direction="{StaticResource PopularCrab99.Shadow.Direction}"
                                                  ShadowDepth="{StaticResource PopularCrab99.Shadow.ShadowDepth}"
                                                  Opacity="{StaticResource PopularCrab99.Shadow.Opacity}" />
                            </Border.Effect>
                            <Border.RenderTransform>
                                <TranslateTransform X="-30" Y="-30" />
                            </Border.RenderTransform>
                        </Border>

                        <!-- Box 2 - Blue (top-right start, animation-delay: -2s = 50% offset) -->
                        <!-- 박스 2 - 파란색 (우상단 시작, 2초 지연 = 50% 오프셋) -->
                        <Border x:Name="Box2"
                                Width="{StaticResource PopularCrab99.Box.Size}"
                                Height="{StaticResource PopularCrab99.Box.Size}"
                                Background="{StaticResource PopularCrab99.Box2.Background}"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                RenderTransformOrigin="0.5,0.5">
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource PopularCrab99.Box2.Color}"
                                                  BlurRadius="{StaticResource PopularCrab99.Shadow.BlurRadius}"
                                                  Direction="{StaticResource PopularCrab99.Shadow.Direction}"
                                                  ShadowDepth="{StaticResource PopularCrab99.Shadow.ShadowDepth}"
                                                  Opacity="{StaticResource PopularCrab99.Shadow.Opacity}" />
                            </Border.Effect>
                            <Border.RenderTransform>
                                <TranslateTransform X="30" Y="-30" />
                            </Border.RenderTransform>
                        </Border>

                        <!-- Box 3 - Green (bottom-right start, animation-delay: -3s = 75% offset) -->
                        <!-- 박스 3 - 녹색 (우하단 시작, 3초 지연 = 75% 오프셋) -->
                        <Border x:Name="Box3"
                                Width="{StaticResource PopularCrab99.Box.Size}"
                                Height="{StaticResource PopularCrab99.Box.Size}"
                                Background="{StaticResource PopularCrab99.Box3.Background}"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                RenderTransformOrigin="0.5,0.5">
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource PopularCrab99.Box3.Color}"
                                                  BlurRadius="{StaticResource PopularCrab99.Shadow.BlurRadius}"
                                                  Direction="{StaticResource PopularCrab99.Shadow.Direction}"
                                                  ShadowDepth="{StaticResource PopularCrab99.Shadow.ShadowDepth}"
                                                  Opacity="{StaticResource PopularCrab99.Shadow.Opacity}" />
                            </Border.Effect>
                            <Border.RenderTransform>
                                <TranslateTransform X="30" Y="30" />
                            </Border.RenderTransform>
                        </Border>

                        <!-- Box 4 - Orange (bottom-left start, animation-delay: -4s = 0% offset) -->
                        <!-- 박스 4 - 주황색 (좌하단 시작, 4초 지연 = 0% 오프셋) -->
                        <Border x:Name="Box4"
                                Width="{StaticResource PopularCrab99.Box.Size}"
                                Height="{StaticResource PopularCrab99.Box.Size}"
                                Background="{StaticResource PopularCrab99.Box4.Background}"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                RenderTransformOrigin="0.5,0.5">
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource PopularCrab99.Box4.Color}"
                                                  BlurRadius="{StaticResource PopularCrab99.Shadow.BlurRadius}"
                                                  Direction="{StaticResource PopularCrab99.Shadow.Direction}"
                                                  ShadowDepth="{StaticResource PopularCrab99.Shadow.ShadowDepth}"
                                                  Opacity="{StaticResource PopularCrab99.Shadow.Opacity}" />
                            </Border.Effect>
                            <Border.RenderTransform>
                                <TranslateTransform X="-30" Y="30" />
                            </Border.RenderTransform>
                        </Border>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <!-- Box 1 Animation (starts at 25% = 1s offset) -->
                                    <!-- 박스 1 애니메이션: 좌상단(-30,-30) → 우상단(30,-30) → 우하단(30,30) → 좌하단(-30,30) → 좌상단 -->
                                    <!-- CSS animation-delay: -1s means start at 25% of 4s cycle -->
                                    <DoubleAnimationUsingKeyFrames
                                        Storyboard.TargetName="Box1"
                                        Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                                        BeginTime="0:0:0">
                                        <LinearDoubleKeyFrame KeyTime="0:0:0" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:1" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:2" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:3" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:4" Value="-30" />
                                    </DoubleAnimationUsingKeyFrames>
                                    <DoubleAnimationUsingKeyFrames
                                        Storyboard.TargetName="Box1"
                                        Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                        BeginTime="0:0:0">
                                        <LinearDoubleKeyFrame KeyTime="0:0:0" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:1" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:2" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:3" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:4" Value="-30" />
                                    </DoubleAnimationUsingKeyFrames>

                                    <!-- Box 2 Animation (starts at 50% = 2s offset) -->
                                    <!-- 박스 2 애니메이션: 우상단(30,-30) → 우하단(30,30) → 좌하단(-30,30) → 좌상단(-30,-30) → 우상단 -->
                                    <DoubleAnimationUsingKeyFrames
                                        Storyboard.TargetName="Box2"
                                        Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                                        BeginTime="0:0:0">
                                        <LinearDoubleKeyFrame KeyTime="0:0:0" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:1" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:2" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:3" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:4" Value="30" />
                                    </DoubleAnimationUsingKeyFrames>
                                    <DoubleAnimationUsingKeyFrames
                                        Storyboard.TargetName="Box2"
                                        Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                        BeginTime="0:0:0">
                                        <LinearDoubleKeyFrame KeyTime="0:0:0" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:1" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:2" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:3" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:4" Value="-30" />
                                    </DoubleAnimationUsingKeyFrames>

                                    <!-- Box 3 Animation (starts at 75% = 3s offset) -->
                                    <!-- 박스 3 애니메이션: 우하단(30,30) → 좌하단(-30,30) → 좌상단(-30,-30) → 우상단(30,-30) → 우하단 -->
                                    <DoubleAnimationUsingKeyFrames
                                        Storyboard.TargetName="Box3"
                                        Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                                        BeginTime="0:0:0">
                                        <LinearDoubleKeyFrame KeyTime="0:0:0" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:1" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:2" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:3" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:4" Value="30" />
                                    </DoubleAnimationUsingKeyFrames>
                                    <DoubleAnimationUsingKeyFrames
                                        Storyboard.TargetName="Box3"
                                        Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                        BeginTime="0:0:0">
                                        <LinearDoubleKeyFrame KeyTime="0:0:0" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:1" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:2" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:3" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:4" Value="30" />
                                    </DoubleAnimationUsingKeyFrames>

                                    <!-- Box 4 Animation (starts at 0% = 4s offset, same as 0s) -->
                                    <!-- 박스 4 애니메이션: 좌하단(-30,30) → 좌상단(-30,-30) → 우상단(30,-30) → 우하단(30,30) → 좌하단 -->
                                    <DoubleAnimationUsingKeyFrames
                                        Storyboard.TargetName="Box4"
                                        Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                                        BeginTime="0:0:0">
                                        <LinearDoubleKeyFrame KeyTime="0:0:0" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:1" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:2" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:3" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:4" Value="-30" />
                                    </DoubleAnimationUsingKeyFrames>
                                    <DoubleAnimationUsingKeyFrames
                                        Storyboard.TargetName="Box4"
                                        Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                        BeginTime="0:0:0">
                                        <LinearDoubleKeyFrame KeyTime="0:0:0" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:1" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:2" Value="-30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:3" Value="30" />
                                        <LinearDoubleKeyFrame KeyTime="0:0:4" Value="30" />
                                    </DoubleAnimationUsingKeyFrames>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
