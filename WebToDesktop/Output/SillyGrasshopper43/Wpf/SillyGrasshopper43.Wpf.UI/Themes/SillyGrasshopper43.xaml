<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:SillyGrasshopper43.Wpf.UI.Controls">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/SillyGrasshopper43.Wpf.UI;component/Themes/SillyGrasshopper43Resources.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <!-- CSS cubic-bezier(0.77, 0, 0.175, 1) approximation using WPF SplineKeyFrame -->
    <!-- This is close to an "ease-in-out" with strong acceleration -->

    <Style TargetType="{x:Type controls:SillyGrasshopper43}">
        <Setter Property="Width" Value="{StaticResource SillyGrasshopper43.Size}" />
        <Setter Property="Height" Value="{StaticResource SillyGrasshopper43.Size}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:SillyGrasshopper43}">
                    <!-- Main container with clipping -->
                    <!-- CSS: width: 50px, height: 50px, transform: translateX(-25px) is handled by centering -->
                    <!-- Total width needed: 100px (50px circle + 50px movement range) -->
                    <Grid Width="100" Height="50" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Canvas Width="100" Height="50">
                            <!-- ::before pseudo-element (Pink circle) -->
                            <!-- CSS: background-color: #fc3f9e, border-radius: 50%, position: absolute -->
                            <!-- animation: rotate9 1s infinite, starts at left: 50px -->
                            <Ellipse x:Name="BeforeCircle"
                                     Width="{StaticResource SillyGrasshopper43.Size}"
                                     Height="{StaticResource SillyGrasshopper43.Size}"
                                     Fill="{StaticResource SillyGrasshopper43.Circle.Before.Background}"
                                     Canvas.Left="50"
                                     Canvas.Top="0"
                                     RenderTransformOrigin="0.5,0.5">
                                <Ellipse.RenderTransform>
                                    <ScaleTransform x:Name="BeforeScale" ScaleX="1" ScaleY="1" />
                                </Ellipse.RenderTransform>
                            </Ellipse>

                            <!-- ::after pseudo-element (Cyan circle) -->
                            <!-- CSS: background-color: #50e8f3, animation-delay: .5s -->
                            <Ellipse x:Name="AfterCircle"
                                     Width="{StaticResource SillyGrasshopper43.Size}"
                                     Height="{StaticResource SillyGrasshopper43.Size}"
                                     Fill="{StaticResource SillyGrasshopper43.Circle.After.Background}"
                                     Canvas.Left="50"
                                     Canvas.Top="0"
                                     RenderTransformOrigin="0.5,0.5">
                                <Ellipse.RenderTransform>
                                    <ScaleTransform x:Name="AfterScale" ScaleX="1" ScaleY="1" />
                                </Ellipse.RenderTransform>
                            </Ellipse>
                        </Canvas>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <!-- ===== Before Circle (Pink) Animation ===== -->
                                    <!-- CSS keyframes:
                                         0%,100%: left: 50px
                                         25%: transform: scale(.3)
                                         50%: left: 0
                                         75%: transform: scale(1)
                                    -->

                                    <!-- Canvas.Left animation: 50 -> 0 -> 50 -->
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BeforeCircle"
                                                                   Storyboard.TargetProperty="(Canvas.Left)">
                                        <!-- 0%: left: 50px -->
                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value="50" />
                                        <!-- 50%: left: 0 -->
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="0"
                                                              KeySpline="0.77,0,0.175,1" />
                                        <!-- 100%: left: 50px -->
                                        <SplineDoubleKeyFrame KeyTime="0:0:1" Value="50"
                                                              KeySpline="0.77,0,0.175,1" />
                                    </DoubleAnimationUsingKeyFrames>

                                    <!-- ScaleX animation: 1 -> 0.3 -> 1 -->
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BeforeScale"
                                                                   Storyboard.TargetProperty="ScaleX">
                                        <!-- 0%: scale(1) implied -->
                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value="1" />
                                        <!-- 25%: scale(.3) -->
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.25" Value="0.3"
                                                              KeySpline="0.77,0,0.175,1" />
                                        <!-- 75%: scale(1) -->
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.75" Value="1"
                                                              KeySpline="0.77,0,0.175,1" />
                                        <!-- 100%: back to implied start -->
                                        <SplineDoubleKeyFrame KeyTime="0:0:1" Value="1" />
                                    </DoubleAnimationUsingKeyFrames>

                                    <!-- ScaleY animation: mirrors ScaleX -->
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="BeforeScale"
                                                                   Storyboard.TargetProperty="ScaleY">
                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value="1" />
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.25" Value="0.3"
                                                              KeySpline="0.77,0,0.175,1" />
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.75" Value="1"
                                                              KeySpline="0.77,0,0.175,1" />
                                        <SplineDoubleKeyFrame KeyTime="0:0:1" Value="1" />
                                    </DoubleAnimationUsingKeyFrames>

                                    <!-- ===== After Circle (Cyan) Animation ===== -->
                                    <!-- Same as Before but with BeginTime="0:0:0.5" (animation-delay: .5s) -->

                                    <!-- Canvas.Left animation with delay -->
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="AfterCircle"
                                                                   Storyboard.TargetProperty="(Canvas.Left)"
                                                                   BeginTime="0:0:0.5">
                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value="50" />
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="0"
                                                              KeySpline="0.77,0,0.175,1" />
                                        <SplineDoubleKeyFrame KeyTime="0:0:1" Value="50"
                                                              KeySpline="0.77,0,0.175,1" />
                                    </DoubleAnimationUsingKeyFrames>

                                    <!-- ScaleX animation with delay -->
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="AfterScale"
                                                                   Storyboard.TargetProperty="ScaleX"
                                                                   BeginTime="0:0:0.5">
                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value="1" />
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.25" Value="0.3"
                                                              KeySpline="0.77,0,0.175,1" />
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.75" Value="1"
                                                              KeySpline="0.77,0,0.175,1" />
                                        <SplineDoubleKeyFrame KeyTime="0:0:1" Value="1" />
                                    </DoubleAnimationUsingKeyFrames>

                                    <!-- ScaleY animation with delay -->
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="AfterScale"
                                                                   Storyboard.TargetProperty="ScaleY"
                                                                   BeginTime="0:0:0.5">
                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value="1" />
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.25" Value="0.3"
                                                              KeySpline="0.77,0,0.175,1" />
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.75" Value="1"
                                                              KeySpline="0.77,0,0.175,1" />
                                        <SplineDoubleKeyFrame KeyTime="0:0:1" Value="1" />
                                    </DoubleAnimationUsingKeyFrames>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
