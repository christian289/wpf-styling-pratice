<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="using:SourOtter25.Avalonia.Lib.Controls">

    <!--
    Original CSS from Uiverse.io by ElektroRaks
    - clip-path polygon with diamond shape
    - backdrop-filter blur effect
    - hover animation: clip-path change, text rotation/movement, opacity

    Note: AvaloniaUI does not support backdrop-filter blur directly.
    Using semi-transparent background as fallback.

    Note: Clip animation is not supported in AvaloniaUI Style animations.
    Using direct Setter for clip-path change on hover.
    -->

    <!-- Colors -->
    <Color x:Key="ClipPathCard.Gradient.Start">#1AFBF0</Color>
    <Color x:Key="ClipPathCard.Gradient.End">#DA00FF</Color>
    <Color x:Key="ClipPathCard.Overlay">#13FFFFFF</Color>
    <Color x:Key="ClipPathCard.Text">White</Color>

    <!-- Sizes (11.875em x 15.875em, 1em = 16px) -->
    <x:Double x:Key="ClipPathCard.Width">190</x:Double>
    <x:Double x:Key="ClipPathCard.Height">254</x:Double>

    <!-- Clip Geometries -->
    <!-- Original: polygon(54% 27%, 100% 50%, 100% 100%, 51% 74%, 0 50%, 0% 0%) -->
    <!-- Converted to absolute coordinates based on 190x254 -->
    <StreamGeometry x:Key="ClipPathCard.ClipGeometry.Normal">M 102.6,68.58 L 190,127 L 190,254 L 96.9,187.96 L 0,127 L 0,0 Z</StreamGeometry>

    <!-- Hover: polygon(100% 0, 100% 50%, 100% 100%, 0% 100%, 0 50%, 0% 0%) -->
    <StreamGeometry x:Key="ClipPathCard.ClipGeometry.Hover">M 190,0 L 190,127 L 190,254 L 0,254 L 0,127 L 0,0 Z</StreamGeometry>

    <!-- Transforms -->
    <RotateTransform x:Key="ClipPathCard.Transform.Rotated" Angle="34" />
    <RotateTransform x:Key="ClipPathCard.Transform.Normal" Angle="0" />

    <ControlTheme x:Key="{x:Type controls:ClipPathCard}" TargetType="controls:ClipPathCard">
        <Setter Property="Width" Value="{StaticResource ClipPathCard.Width}" />
        <Setter Property="Height" Value="{StaticResource ClipPathCard.Height}" />
        <Setter Property="ClipToBounds" Value="True" />
        <Setter Property="Template">
            <ControlTemplate>
                <!-- Main container with gradient background -->
                <Border x:Name="PART_Root" ClipToBounds="True">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                            <GradientStop Color="{StaticResource ClipPathCard.Gradient.Start}" Offset="0" />
                            <GradientStop Color="{StaticResource ClipPathCard.Gradient.End}" Offset="1" />
                        </LinearGradientBrush>
                    </Border.Background>

                    <!-- Box layer with semi-transparent overlay (backdrop-filter fallback) -->
                    <Border x:Name="PART_Box" Background="{StaticResource ClipPathCard.Overlay}">
                        <!-- Content layer with clip-path -->
                        <Border x:Name="PART_Content"
                                Clip="{StaticResource ClipPathCard.ClipGeometry.Normal}"
                                Padding="10">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                    <GradientStop Color="{StaticResource ClipPathCard.Gradient.Start}" Offset="0" />
                                    <GradientStop Color="{StaticResource ClipPathCard.Gradient.End}" Offset="1" />
                                </LinearGradientBrush>
                            </Border.Background>

                            <Panel>
                                <!-- Title with rotation -->
                                <TextBlock x:Name="PART_Title"
                                           Text="{TemplateBinding Title}"
                                           Foreground="{StaticResource ClipPathCard.Text}"
                                           FontWeight="Bold"
                                           FontSize="19.2"
                                           HorizontalAlignment="Left"
                                           VerticalAlignment="Top"
                                           Margin="47.5,100.8,0,0"
                                           RenderTransformOrigin="0.5,0.5"
                                           RenderTransform="{StaticResource ClipPathCard.Transform.Rotated}" />

                                <!-- Text container at bottom -->
                                <StackPanel x:Name="PART_TextContainer"
                                            VerticalAlignment="Bottom"
                                            Opacity="0">
                                    <TextBlock Text="{TemplateBinding Subtitle}"
                                               Foreground="{StaticResource ClipPathCard.Text}"
                                               FontWeight="Bold"
                                               FontSize="14" />
                                    <TextBlock Text="{TemplateBinding Description}"
                                               Foreground="{StaticResource ClipPathCard.Text}"
                                               FontSize="12"
                                               Margin="0,4,0,0" />
                                </StackPanel>
                            </Panel>
                        </Border>
                    </Border>
                </Border>
            </ControlTemplate>
        </Setter>

        <!-- Hover state -->
        <Style Selector="^:pointerover /template/ Border#PART_Content">
            <Setter Property="Clip" Value="{StaticResource ClipPathCard.ClipGeometry.Hover}" />
        </Style>

        <Style Selector="^:pointerover /template/ TextBlock#PART_Title">
            <Setter Property="Margin" Value="0,16,0,0" />
            <Setter Property="RenderTransform" Value="{StaticResource ClipPathCard.Transform.Normal}" />
            <Style.Animations>
                <Animation Duration="0:0:0.5" FillMode="Forward" Easing="CubicEaseOut">
                    <KeyFrame Cue="100%">
                        <Setter Property="Margin" Value="0,16,0,0" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <Style Selector="^:pointerover /template/ StackPanel#PART_TextContainer">
            <Setter Property="Opacity" Value="1" />
            <Style.Animations>
                <Animation Duration="0:0:0.5" FillMode="Forward" Easing="CubicEaseOut">
                    <KeyFrame Cue="100%">
                        <Setter Property="Opacity" Value="1" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <!-- Return to normal state -->
        <Style Selector="^:not(:pointerover) /template/ TextBlock#PART_Title">
            <Style.Animations>
                <Animation Duration="0:0:0.5" FillMode="Forward" Easing="CubicEaseOut">
                    <KeyFrame Cue="100%">
                        <Setter Property="Margin" Value="47.5,100.8,0,0" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <Style Selector="^:not(:pointerover) /template/ StackPanel#PART_TextContainer">
            <Style.Animations>
                <Animation Duration="0:0:0.5" FillMode="Forward" Easing="CubicEaseOut">
                    <KeyFrame Cue="100%">
                        <Setter Property="Opacity" Value="0" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

    </ControlTheme>

</ResourceDictionary>
