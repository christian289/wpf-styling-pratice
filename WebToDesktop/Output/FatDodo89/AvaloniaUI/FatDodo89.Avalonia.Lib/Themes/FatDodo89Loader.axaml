<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="using:FatDodo89.Avalonia.Lib.Controls">

    <!--
    FatDodo89Loader: 눈과 입이 있는 이모티콘 스타일 로딩 스피너
    FatDodo89Loader: Emoticon-style loading spinner with eyes and mouth

    원본 소스: uiverse.io by fanishah
    Original source: uiverse.io by fanishah
    -->

    <Design.PreviewWith>
        <Border Padding="20" Background="#1a1a2e">
            <controls:FatDodo89Loader />
        </Border>
    </Design.PreviewWith>

    <!-- 색상 리소스 -->
    <Color x:Key="FatDodo89.TopColor">#14b8a6</Color>
    <Color x:Key="FatDodo89.BottomColor">#3b82f6</Color>
    <SolidColorBrush x:Key="FatDodo89.TopBrush" Color="{StaticResource FatDodo89.TopColor}" />
    <SolidColorBrush x:Key="FatDodo89.BottomBrush" Color="{StaticResource FatDodo89.BottomColor}" />

    <ControlTheme x:Key="{x:Type controls:FatDodo89Loader}" TargetType="controls:FatDodo89Loader">
        <Setter Property="Width" Value="{Binding LoaderSize, RelativeSource={RelativeSource Self}}" />
        <Setter Property="Height" Value="{Binding LoaderSize, RelativeSource={RelativeSource Self}}" />
        <Setter Property="Template">
            <ControlTemplate>
                <Viewbox Width="{TemplateBinding Width}"
                         Height="{TemplateBinding Height}"
                         Stretch="Uniform">
                    <Canvas Width="128" Height="128">
                        <!--
                        그라데이션 마스크용 사각형 (위: 청록색, 아래: 파란색)
                        Gradient mask rectangle (top: cyan, bottom: blue)
                        -->

                        <!-- 상단 레이어 (청록색) - Top Layer (Cyan) -->
                        <Canvas x:Name="PART_TopLayer">
                            <!-- 눈 - Eyes -->
                            <Ellipse x:Name="PART_TopEye1"
                                     Width="16" Height="16"
                                     Fill="{StaticResource FatDodo89.TopBrush}"
                                     Canvas.Left="28" Canvas.Top="20"
                                     RenderTransformOrigin="0.5,0.5">
                                <Ellipse.RenderTransform>
                                    <RotateTransform />
                                </Ellipse.RenderTransform>
                            </Ellipse>
                            <Ellipse x:Name="PART_TopEye2"
                                     Width="16" Height="16"
                                     Fill="{StaticResource FatDodo89.TopBrush}"
                                     Canvas.Left="84" Canvas.Top="20"
                                     RenderTransformOrigin="0.5,0.5">
                                <Ellipse.RenderTransform>
                                    <RotateTransform />
                                </Ellipse.RenderTransform>
                            </Ellipse>

                            <!-- 입 (아크) - Mouth (Arc) -->
                            <Path x:Name="PART_TopMouth1"
                                  Stroke="{StaticResource FatDodo89.TopBrush}"
                                  StrokeThickness="12"
                                  StrokeLineCap="Round"
                                  StrokeDashArray="2.98,5.96"
                                  RenderTransformOrigin="0.5,0.5">
                                <Path.Data>
                                    <EllipseGeometry Center="64,64" RadiusX="56" RadiusY="56" />
                                </Path.Data>
                                <Path.RenderTransform>
                                    <RotateTransform Angle="180" />
                                </Path.RenderTransform>
                            </Path>
                            <Path x:Name="PART_TopMouth2"
                                  Stroke="{StaticResource FatDodo89.TopBrush}"
                                  StrokeThickness="12"
                                  StrokeLineCap="Round"
                                  StrokeDashArray="2.98,5.96"
                                  Opacity="0"
                                  RenderTransformOrigin="0.5,0.5">
                                <Path.Data>
                                    <EllipseGeometry Center="64,64" RadiusX="56" RadiusY="56" />
                                </Path.Data>
                                <Path.RenderTransform>
                                    <RotateTransform Angle="0" />
                                </Path.RenderTransform>
                            </Path>
                        </Canvas>

                        <!-- 하단 레이어 (파란색, 마스크 적용) - Bottom Layer (Blue, with mask) -->
                        <Canvas x:Name="PART_BottomLayer">
                            <Canvas.OpacityMask>
                                <LinearGradientBrush StartPoint="0%,0%" EndPoint="0%,100%">
                                    <GradientStop Color="Transparent" Offset="0" />
                                    <GradientStop Color="White" Offset="1" />
                                </LinearGradientBrush>
                            </Canvas.OpacityMask>

                            <!-- 눈 - Eyes -->
                            <Ellipse x:Name="PART_BottomEye1"
                                     Width="16" Height="16"
                                     Fill="{StaticResource FatDodo89.BottomBrush}"
                                     Canvas.Left="28" Canvas.Top="20"
                                     RenderTransformOrigin="0.5,0.5">
                                <Ellipse.RenderTransform>
                                    <RotateTransform />
                                </Ellipse.RenderTransform>
                            </Ellipse>
                            <Ellipse x:Name="PART_BottomEye2"
                                     Width="16" Height="16"
                                     Fill="{StaticResource FatDodo89.BottomBrush}"
                                     Canvas.Left="84" Canvas.Top="20"
                                     RenderTransformOrigin="0.5,0.5">
                                <Ellipse.RenderTransform>
                                    <RotateTransform />
                                </Ellipse.RenderTransform>
                            </Ellipse>

                            <!-- 입 (아크) - Mouth (Arc) -->
                            <Path x:Name="PART_BottomMouth1"
                                  Stroke="{StaticResource FatDodo89.BottomBrush}"
                                  StrokeThickness="12"
                                  StrokeLineCap="Round"
                                  StrokeDashArray="2.98,5.96"
                                  RenderTransformOrigin="0.5,0.5">
                                <Path.Data>
                                    <EllipseGeometry Center="64,64" RadiusX="56" RadiusY="56" />
                                </Path.Data>
                                <Path.RenderTransform>
                                    <RotateTransform Angle="180" />
                                </Path.RenderTransform>
                            </Path>
                            <Path x:Name="PART_BottomMouth2"
                                  Stroke="{StaticResource FatDodo89.BottomBrush}"
                                  StrokeThickness="12"
                                  StrokeLineCap="Round"
                                  StrokeDashArray="2.98,5.96"
                                  Opacity="0"
                                  RenderTransformOrigin="0.5,0.5">
                                <Path.Data>
                                    <EllipseGeometry Center="64,64" RadiusX="56" RadiusY="56" />
                                </Path.Data>
                                <Path.RenderTransform>
                                    <RotateTransform Angle="0" />
                                </Path.RenderTransform>
                            </Path>
                        </Canvas>
                    </Canvas>
                </Viewbox>
            </ControlTemplate>
        </Setter>

        <!-- 눈 애니메이션 - Eye Animation -->
        <Style Selector="^/template/ Ellipse#PART_TopEye1, ^/template/ Ellipse#PART_BottomEye1">
            <Style.Animations>
                <Animation Duration="0:0:3" IterationCount="Infinite" Easing="CubicEaseInOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="RenderTransform">
                            <RotateTransform Angle="-260" CenterX="8" CenterY="8" />
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="50%">
                        <Setter Property="RenderTransform">
                            <RotateTransform Angle="-40" CenterX="8" CenterY="8" />
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="RenderTransform">
                            <TransformGroup>
                                <RotateTransform Angle="225" CenterX="8" CenterY="8" />
                                <ScaleTransform ScaleX="0.35" ScaleY="0.35" />
                            </TransformGroup>
                        </Setter>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <Style Selector="^/template/ Ellipse#PART_TopEye2, ^/template/ Ellipse#PART_BottomEye2">
            <Style.Animations>
                <Animation Duration="0:0:3" IterationCount="Infinite" Easing="CubicEaseInOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="RenderTransform">
                            <RotateTransform Angle="-260" CenterX="8" CenterY="8" />
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="50%">
                        <Setter Property="RenderTransform">
                            <RotateTransform Angle="40" CenterX="8" CenterY="8" />
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="52.5%">
                        <Setter Property="RenderTransform">
                            <TransformGroup>
                                <RotateTransform Angle="40" CenterX="8" CenterY="8" />
                                <ScaleTransform ScaleX="1" ScaleY="0" />
                            </TransformGroup>
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="55%">
                        <Setter Property="RenderTransform">
                            <RotateTransform Angle="40" CenterX="8" CenterY="8" />
                        </Setter>
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="RenderTransform">
                            <TransformGroup>
                                <RotateTransform Angle="150" CenterX="8" CenterY="8" />
                                <ScaleTransform ScaleX="0.4" ScaleY="0.4" />
                            </TransformGroup>
                        </Setter>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <!-- 입 애니메이션 - Mouth Animation -->
        <Style Selector="^/template/ Path#PART_TopMouth1, ^/template/ Path#PART_BottomMouth1">
            <Style.Animations>
                <Animation Duration="0:0:3" IterationCount="Infinite" Easing="CubicEaseInOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="StrokeDashOffset" Value="0" />
                        <Setter Property="Opacity" Value="1" />
                    </KeyFrame>
                    <KeyFrame Cue="25%">
                        <Setter Property="StrokeDashOffset" Value="0" />
                        <Setter Property="Opacity" Value="1" />
                    </KeyFrame>
                    <KeyFrame Cue="50%">
                        <Setter Property="StrokeDashOffset" Value="-3" />
                        <Setter Property="Opacity" Value="1" />
                    </KeyFrame>
                    <KeyFrame Cue="75%">
                        <Setter Property="Opacity" Value="0" />
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="Opacity" Value="0" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <Style Selector="^/template/ Path#PART_TopMouth2, ^/template/ Path#PART_BottomMouth2">
            <Style.Animations>
                <Animation Duration="0:0:3" IterationCount="Infinite" Easing="CubicEaseInOut">
                    <KeyFrame Cue="0%">
                        <Setter Property="Opacity" Value="0" />
                        <Setter Property="StrokeDashOffset" Value="0" />
                    </KeyFrame>
                    <KeyFrame Cue="50%">
                        <Setter Property="Opacity" Value="1" />
                        <Setter Property="StrokeDashOffset" Value="0" />
                    </KeyFrame>
                    <KeyFrame Cue="100%">
                        <Setter Property="Opacity" Value="1" />
                        <Setter Property="StrokeDashOffset" Value="-6" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>
    </ControlTheme>

</ResourceDictionary>
