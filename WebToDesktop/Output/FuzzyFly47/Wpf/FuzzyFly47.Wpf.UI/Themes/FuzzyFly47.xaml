<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:FuzzyFly47.Wpf.UI.Controls">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/FuzzyFly47.Wpf.UI;component/Themes/FuzzyFly47Resources.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <Style TargetType="{x:Type controls:FuzzyFly47}">
        <Setter Property="Width" Value="{StaticResource FuzzyFly47.Width}"/>
        <Setter Property="Height" Value="{StaticResource FuzzyFly47.Height}"/>
        <Setter Property="Foreground" Value="{StaticResource FuzzyFly47.Foreground}"/>
        <Setter Property="FontFamily" Value="Segoe UI"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:FuzzyFly47}">
                    <!-- Outer container with drop shadow -->
                    <Border x:Name="OuterBorder"
                            Background="{StaticResource FuzzyFly47.Background}"
                            CornerRadius="{StaticResource FuzzyFly47.CornerRadius}"
                            Effect="{StaticResource FuzzyFly47.DropShadow}">

                        <!-- Inner border for inset box-shadow effect -->
                        <!-- Using nested borders to simulate CSS inset box-shadow -->
                        <Border CornerRadius="{StaticResource FuzzyFly47.CornerRadius}"
                                BorderThickness="2"
                                BorderBrush="{StaticResource FuzzyFly47.InnerBorder.TopLeft}">
                            <Border CornerRadius="12"
                                    BorderThickness="0,0,2,2"
                                    BorderBrush="{StaticResource FuzzyFly47.InnerBorder.BottomRight}"
                                    Padding="{StaticResource FuzzyFly47.Padding}">

                                <!-- Content area -->
                                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                    <!-- Message text -->
                                    <!-- font-size: 11px; text-transform: uppercase; letter-spacing: 1px -->
                                    <TextBlock x:Name="MessageText"
                                               Text="{TemplateBinding Message}"
                                               FontSize="{StaticResource FuzzyFly47.Message.FontSize}"
                                               Foreground="{TemplateBinding Foreground}"
                                               HorizontalAlignment="Center"
                                               TextAlignment="Center"
                                               Typography.Capitals="AllSmallCaps"/>

                                    <!-- Level section with arrows -->
                                    <!-- display: flex; justify-content: center; gap: 5px -->
                                    <StackPanel Orientation="Horizontal"
                                                HorizontalAlignment="Center"
                                                Margin="{StaticResource FuzzyFly47.Level.Margin}">

                                        <!-- Left arrow with animation -->
                                        <TextBlock x:Name="LeftArrow"
                                                   Text="↑"
                                                   FontSize="{StaticResource FuzzyFly47.Arrow.FontSize}"
                                                   Foreground="{StaticResource FuzzyFly47.Arrow.Foreground}"
                                                   Margin="{StaticResource FuzzyFly47.Arrow.First.Margin}"
                                                   RenderTransformOrigin="0.5,0.5">
                                            <TextBlock.RenderTransform>
                                                <TranslateTransform x:Name="LeftArrowTranslate" Y="0"/>
                                            </TextBlock.RenderTransform>
                                        </TextBlock>

                                        <!-- Level text -->
                                        <!-- font-weight: 700; text-transform: uppercase; letter-spacing: 2px; font-size: 20px -->
                                        <TextBlock Text="{TemplateBinding LevelText}"
                                                   FontSize="{StaticResource FuzzyFly47.Level.FontSize}"
                                                   FontWeight="Bold"
                                                   Foreground="{TemplateBinding Foreground}"
                                                   VerticalAlignment="Center"
                                                   Typography.Capitals="AllSmallCaps"/>

                                        <!-- Right arrow with animation -->
                                        <TextBlock x:Name="RightArrow"
                                                   Text="↑"
                                                   FontSize="{StaticResource FuzzyFly47.Arrow.FontSize}"
                                                   Foreground="{StaticResource FuzzyFly47.Arrow.Foreground}"
                                                   Margin="{StaticResource FuzzyFly47.Arrow.Margin}"
                                                   RenderTransformOrigin="0.5,0.5">
                                            <TextBlock.RenderTransform>
                                                <TranslateTransform x:Name="RightArrowTranslate" Y="0"/>
                                            </TextBlock.RenderTransform>
                                        </TextBlock>

                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </Border>
                    </Border>

                    <ControlTemplate.Triggers>
                        <!-- Animation trigger when control is loaded -->
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <!--
                                    CSS keyframes ud:
                                    0%   { transform: translateY(-1px); opacity: 0; }
                                    50%  { transform: translateY(-5px); opacity: 1; }
                                    100% { transform: translateY(-1px); opacity: 0; }
                                    animation: ud 1s ease-in-out infinite
                                    -->

                                    <!-- Left Arrow Y Translation -->
                                    <DoubleAnimationUsingKeyFrames
                                        Storyboard.TargetName="LeftArrowTranslate"
                                        Storyboard.TargetProperty="Y"
                                        Duration="0:0:1">
                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value="-1"/>
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="-5" KeySpline="0.42,0,0.58,1"/>
                                        <SplineDoubleKeyFrame KeyTime="0:0:1" Value="-1" KeySpline="0.42,0,0.58,1"/>
                                    </DoubleAnimationUsingKeyFrames>

                                    <!-- Left Arrow Opacity -->
                                    <DoubleAnimationUsingKeyFrames
                                        Storyboard.TargetName="LeftArrow"
                                        Storyboard.TargetProperty="Opacity"
                                        Duration="0:0:1">
                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value="0"/>
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="1" KeySpline="0.42,0,0.58,1"/>
                                        <SplineDoubleKeyFrame KeyTime="0:0:1" Value="0" KeySpline="0.42,0,0.58,1"/>
                                    </DoubleAnimationUsingKeyFrames>

                                    <!-- Right Arrow Y Translation -->
                                    <DoubleAnimationUsingKeyFrames
                                        Storyboard.TargetName="RightArrowTranslate"
                                        Storyboard.TargetProperty="Y"
                                        Duration="0:0:1">
                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value="-1"/>
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="-5" KeySpline="0.42,0,0.58,1"/>
                                        <SplineDoubleKeyFrame KeyTime="0:0:1" Value="-1" KeySpline="0.42,0,0.58,1"/>
                                    </DoubleAnimationUsingKeyFrames>

                                    <!-- Right Arrow Opacity -->
                                    <DoubleAnimationUsingKeyFrames
                                        Storyboard.TargetName="RightArrow"
                                        Storyboard.TargetProperty="Opacity"
                                        Duration="0:0:1">
                                        <SplineDoubleKeyFrame KeyTime="0:0:0" Value="0"/>
                                        <SplineDoubleKeyFrame KeyTime="0:0:0.5" Value="1" KeySpline="0.42,0,0.58,1"/>
                                        <SplineDoubleKeyFrame KeyTime="0:0:1" Value="0" KeySpline="0.42,0,0.58,1"/>
                                    </DoubleAnimationUsingKeyFrames>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
