<Window x:Class="PhotoBoothCarousel.TouchEnhancedWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MOODIT Photo Booth - Touch Enhanced"
        Height="1080"
        Width="1920"
        WindowState="Maximized"
        WindowStyle="None"
        Background="{StaticResource DarkBackgroundBrush}"
        Loaded="Window_Loaded"
        IsManipulationEnabled="True">

    <Window.Resources>
        <!-- Shimmer Animation for Idle State -->
        <Storyboard x:Key="ShimmerAnimation" RepeatBehavior="Forever">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ShimmerGradient"
                                          Storyboard.TargetProperty="Offset">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="-1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:2" Value="2">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CubicEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>

        <!-- Particle Animation -->
        <Storyboard x:Key="ParticleAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="Particle1"
                           Storyboard.TargetProperty="(Canvas.Top)"
                           From="1080" To="-100"
                           Duration="0:0:15"
                           BeginTime="0:0:0"/>
            <DoubleAnimation Storyboard.TargetName="Particle2"
                           Storyboard.TargetProperty="(Canvas.Top)"
                           From="1080" To="-100"
                           Duration="0:0:18"
                           BeginTime="0:0:2"/>
            <DoubleAnimation Storyboard.TargetName="Particle3"
                           Storyboard.TargetProperty="(Canvas.Top)"
                           From="1080" To="-100"
                           Duration="0:0:20"
                           BeginTime="0:0:4"/>
            <DoubleAnimation Storyboard.TargetName="Particle4"
                           Storyboard.TargetProperty="(Canvas.Top)"
                           From="1080" To="-100"
                           Duration="0:0:16"
                           BeginTime="0:0:1"/>
            <DoubleAnimation Storyboard.TargetName="Particle5"
                           Storyboard.TargetProperty="(Canvas.Top)"
                           From="1080" To="-100"
                           Duration="0:0:22"
                           BeginTime="0:0:3"/>
        </Storyboard>

        <!-- Glow Pulse Animation -->
        <Storyboard x:Key="GlowPulseAnimation" RepeatBehavior="Forever">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="GlowEllipse1"
                                          Storyboard.TargetProperty="Opacity">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0.3"/>
                <EasingDoubleKeyFrame KeyTime="0:0:2" Value="0.7">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <SineEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:4" Value="0.3">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <SineEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>

            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="GlowEllipse2"
                                          Storyboard.TargetProperty="Opacity">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0.5"/>
                <EasingDoubleKeyFrame KeyTime="0:0:3" Value="0.9">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <SineEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:6" Value="0.5">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <SineEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </Window.Resources>

    <Grid x:Name="RootGrid"
          ManipulationDelta="Grid_ManipulationDelta"
          ManipulationCompleted="Grid_ManipulationCompleted"
          Background="Transparent">

        <!-- Animated Background Layers -->
        <Canvas x:Name="BackgroundCanvas" ClipToBounds="True">
            <!-- Gradient Background -->
            <Rectangle Width="1920" Height="1080">
                <Rectangle.Fill>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#101010" Offset="0"/>
                        <GradientStop Color="#1a1a1a" Offset="0.5"/>
                        <GradientStop Color="#101010" Offset="1"/>
                    </LinearGradientBrush>
                </Rectangle.Fill>
            </Rectangle>

            <!-- Floating Particles -->
            <Ellipse x:Name="Particle1"
                    Width="8" Height="8"
                    Fill="#40FF6B9E"
                    Canvas.Left="300" Canvas.Top="1080">
                <Ellipse.Effect>
                    <BlurEffect Radius="4"/>
                </Ellipse.Effect>
            </Ellipse>

            <Ellipse x:Name="Particle2"
                    Width="6" Height="6"
                    Fill="#406B8EFF"
                    Canvas.Left="800" Canvas.Top="1080">
                <Ellipse.Effect>
                    <BlurEffect Radius="3"/>
                </Ellipse.Effect>
            </Ellipse>

            <Ellipse x:Name="Particle3"
                    Width="10" Height="10"
                    Fill="#40FFD76B"
                    Canvas.Left="1400" Canvas.Top="1080">
                <Ellipse.Effect>
                    <BlurEffect Radius="5"/>
                </Ellipse.Effect>
            </Ellipse>

            <Ellipse x:Name="Particle4"
                    Width="7" Height="7"
                    Fill="#40FF6B9E"
                    Canvas.Left="1100" Canvas.Top="1080">
                <Ellipse.Effect>
                    <BlurEffect Radius="4"/>
                </Ellipse.Effect>
            </Ellipse>

            <Ellipse x:Name="Particle5"
                    Width="9" Height="9"
                    Fill="#406B8EFF"
                    Canvas.Left="500" Canvas.Top="1080">
                <Ellipse.Effect>
                    <BlurEffect Radius="4"/>
                </Ellipse.Effect>
            </Ellipse>

            <!-- Large Glow Elements -->
            <Ellipse x:Name="GlowEllipse1"
                    Width="600" Height="600"
                    Canvas.Left="200" Canvas.Top="200"
                    Opacity="0.3">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#40FF6B9E" Offset="0"/>
                        <GradientStop Color="#00FF6B9E" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
                <Ellipse.Effect>
                    <BlurEffect Radius="100"/>
                </Ellipse.Effect>
            </Ellipse>

            <Ellipse x:Name="GlowEllipse2"
                    Width="700" Height="700"
                    Canvas.Left="1100" Canvas.Top="300"
                    Opacity="0.5">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#406B8EFF" Offset="0"/>
                        <GradientStop Color="#006B8EFF" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
                <Ellipse.Effect>
                    <BlurEffect Radius="120"/>
                </Ellipse.Effect>
            </Ellipse>

            <!-- Shimmer overlay -->
            <Rectangle Width="1920" Height="1080" Opacity="0.15">
                <Rectangle.Fill>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <LinearGradientBrush.Transform>
                            <TranslateTransform x:Name="ShimmerGradient" X="0"/>
                        </LinearGradientBrush.Transform>
                        <GradientStop Color="#00ffffff" Offset="0"/>
                        <GradientStop Color="#40ffffff" Offset="0.5"/>
                        <GradientStop Color="#00ffffff" Offset="1"/>
                    </LinearGradientBrush>
                </Rectangle.Fill>
            </Rectangle>
        </Canvas>

        <!-- Main Content -->
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header with Animation -->
            <Border Grid.Row="0"
                    Height="120"
                    Background="#15ffffff"
                    BorderBrush="#20ffffff"
                    BorderThickness="0,0,0,2">
                <Border.Effect>
                    <DropShadowEffect Color="#000000"
                                    BlurRadius="20"
                                    ShadowDepth="0"
                                    Opacity="0.3"/>
                </Border.Effect>
                <Grid Margin="80,0">
                    <StackPanel Orientation="Horizontal"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Left">
                        <TextBlock Text="MOODIT"
                                  FontSize="52"
                                  FontWeight="Black"
                                  Foreground="White">
                            <TextBlock.Effect>
                                <DropShadowEffect Color="#FF6B9E"
                                                BlurRadius="25"
                                                ShadowDepth="0"
                                                Opacity="0.8"/>
                            </TextBlock.Effect>
                        </TextBlock>
                        <Border Width="3"
                               Height="40"
                               Background="#40ffffff"
                               Margin="25,0"
                               CornerRadius="2"/>
                        <TextBlock Text="Touch Enhanced"
                                  FontSize="24"
                                  FontWeight="Light"
                                  Foreground="#ccffffff"
                                  VerticalAlignment="Center"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Center">
                        <Border Background="#20ffffff"
                               CornerRadius="20"
                               Padding="20,10"
                               Margin="0,0,15,0">
                            <TextBlock Text="â† ìŠ¤ì™€ì´í”„í•˜ì—¬ ì´ë™ â†’"
                                      FontSize="18"
                                      Foreground="#ffffff"
                                      FontWeight="SemiBold"/>
                        </Border>
                        <TextBlock Text="ðŸ“¸"
                                  FontSize="42"
                                  VerticalAlignment="Center"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Carousel Container -->
            <Grid Grid.Row="1" Margin="0,60">
                <Canvas x:Name="CarouselCanvas"
                       Width="1920"
                       Height="800"
                       ClipToBounds="False"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center">

                    <!-- Card 1 - Classic -->
                    <Border x:Name="TouchCard1"
                           Width="420"
                           Height="580"
                           Background="#1f1f1f"
                           CornerRadius="25"
                           BorderBrush="#50ffffff"
                           BorderThickness="2"
                           Canvas.Left="250"
                           Canvas.Top="110"
                           RenderTransformOrigin="0.5,0.5">
                        <Border.Effect>
                            <DropShadowEffect Color="Black"
                                            BlurRadius="50"
                                            ShadowDepth="0"
                                            Opacity="0.6"/>
                        </Border.Effect>
                        <Border.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform x:Name="TouchCard1Scale"/>
                                <RotateTransform x:Name="TouchCard1Rotate"/>
                                <TranslateTransform x:Name="TouchCard1Translate"/>
                            </TransformGroup>
                        </Border.RenderTransform>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="2*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0"
                                   CornerRadius="25,25,0,0"
                                   Margin="0">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#FF6B9E" Offset="0"/>
                                        <GradientStop Color="#FF4585" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Grid>
                                    <Ellipse Width="200" Height="200"
                                            Fill="#20ffffff"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Margin="0,-50,0,0">
                                        <Ellipse.Effect>
                                            <BlurEffect Radius="40"/>
                                        </Ellipse.Effect>
                                    </Ellipse>
                                    <TextBlock Text="ðŸ“·"
                                              FontSize="140"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Margin="0,0,0,20"/>
                                </Grid>
                            </Border>

                            <StackPanel Grid.Row="1"
                                       Margin="35,30"
                                       VerticalAlignment="Center">
                                <TextBlock Text="í´ëž˜ì‹ ì»·"
                                          FontSize="34"
                                          FontWeight="Bold"
                                          Foreground="White"
                                          Margin="0,0,0,12"/>
                                <TextBlock Text="4ìž¥ì˜ ì¶”ì–µì„ ë‹´ì•„ë³´ì„¸ìš”"
                                          FontSize="18"
                                          Foreground="#bbffffff"
                                          TextWrapping="Wrap"
                                          LineHeight="24"/>
                                <Border Background="#30FF6B9E"
                                       CornerRadius="15"
                                       Padding="15,8"
                                       Margin="0,15,0,0"
                                       HorizontalAlignment="Left">
                                    <TextBlock Text="â‚© 8,000"
                                              FontSize="22"
                                              FontWeight="Bold"
                                              Foreground="White"/>
                                </Border>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Card 2 - Video -->
                    <Border x:Name="TouchCard2"
                           Width="420"
                           Height="580"
                           Background="#1f1f1f"
                           CornerRadius="25"
                           BorderBrush="#50ffffff"
                           BorderThickness="2"
                           Canvas.Left="750"
                           Canvas.Top="110"
                           RenderTransformOrigin="0.5,0.5">
                        <Border.Effect>
                            <DropShadowEffect Color="Black"
                                            BlurRadius="50"
                                            ShadowDepth="0"
                                            Opacity="0.6"/>
                        </Border.Effect>
                        <Border.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform x:Name="TouchCard2Scale"/>
                                <RotateTransform x:Name="TouchCard2Rotate"/>
                                <TranslateTransform x:Name="TouchCard2Translate"/>
                            </TransformGroup>
                        </Border.RenderTransform>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="2*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0"
                                   CornerRadius="25,25,0,0">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#6B8EFF" Offset="0"/>
                                        <GradientStop Color="#4568FF" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Grid>
                                    <Ellipse Width="200" Height="200"
                                            Fill="#20ffffff"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Margin="0,-50,0,0">
                                        <Ellipse.Effect>
                                            <BlurEffect Radius="40"/>
                                        </Ellipse.Effect>
                                    </Ellipse>
                                    <TextBlock Text="ðŸŽ¬"
                                              FontSize="140"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Margin="0,0,0,20"/>
                                </Grid>
                            </Border>

                            <StackPanel Grid.Row="1"
                                       Margin="35,30"
                                       VerticalAlignment="Center">
                                <TextBlock Text="ë¹„ë””ì˜¤ ë¶€ìŠ¤"
                                          FontSize="34"
                                          FontWeight="Bold"
                                          Foreground="White"
                                          Margin="0,0,0,12"/>
                                <TextBlock Text="15ì´ˆ ë™ì˜ìƒìœ¼ë¡œ ê¸°ì–µí•˜ì„¸ìš”"
                                          FontSize="18"
                                          Foreground="#bbffffff"
                                          TextWrapping="Wrap"
                                          LineHeight="24"/>
                                <Border Background="#306B8EFF"
                                       CornerRadius="15"
                                       Padding="15,8"
                                       Margin="0,15,0,0"
                                       HorizontalAlignment="Left">
                                    <TextBlock Text="â‚© 10,000"
                                              FontSize="22"
                                              FontWeight="Bold"
                                              Foreground="White"/>
                                </Border>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Card 3 - Premium -->
                    <Border x:Name="TouchCard3"
                           Width="420"
                           Height="580"
                           Background="#1f1f1f"
                           CornerRadius="25"
                           BorderBrush="#50ffffff"
                           BorderThickness="2"
                           Canvas.Left="1250"
                           Canvas.Top="110"
                           RenderTransformOrigin="0.5,0.5">
                        <Border.Effect>
                            <DropShadowEffect Color="Black"
                                            BlurRadius="50"
                                            ShadowDepth="0"
                                            Opacity="0.6"/>
                        </Border.Effect>
                        <Border.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform x:Name="TouchCard3Scale"/>
                                <RotateTransform x:Name="TouchCard3Rotate"/>
                                <TranslateTransform x:Name="TouchCard3Translate"/>
                            </TransformGroup>
                        </Border.RenderTransform>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="2*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0"
                                   CornerRadius="25,25,0,0">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#FFD76B" Offset="0"/>
                                        <GradientStop Color="#FFB84D" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Grid>
                                    <Ellipse Width="200" Height="200"
                                            Fill="#20ffffff"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Margin="0,-50,0,0">
                                        <Ellipse.Effect>
                                            <BlurEffect Radius="40"/>
                                        </Ellipse.Effect>
                                    </Ellipse>
                                    <TextBlock Text="âœ¨"
                                              FontSize="140"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Margin="0,0,0,20"/>
                                    <Border Background="#30000000"
                                           CornerRadius="20"
                                           Padding="15,8"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Top"
                                           Margin="20">
                                        <TextBlock Text="BEST"
                                                  FontSize="16"
                                                  FontWeight="Bold"
                                                  Foreground="White"/>
                                    </Border>
                                </Grid>
                            </Border>

                            <StackPanel Grid.Row="1"
                                       Margin="35,30"
                                       VerticalAlignment="Center">
                                <TextBlock Text="í”„ë¦¬ë¯¸ì—„ íŒ¨í‚¤ì§€"
                                          FontSize="34"
                                          FontWeight="Bold"
                                          Foreground="White"
                                          Margin="0,0,0,12"/>
                                <TextBlock Text="ì‚¬ì§„ + ì˜ìƒ + í”„ë ˆìž„ê¹Œì§€!"
                                          FontSize="18"
                                          Foreground="#bbffffff"
                                          TextWrapping="Wrap"
                                          LineHeight="24"/>
                                <Border Background="#30FFD76B"
                                       CornerRadius="15"
                                       Padding="15,8"
                                       Margin="0,15,0,0"
                                       HorizontalAlignment="Left">
                                    <TextBlock Text="â‚© 15,000"
                                              FontSize="22"
                                              FontWeight="Bold"
                                              Foreground="White"/>
                                </Border>
                            </StackPanel>
                        </Grid>
                    </Border>
                </Canvas>
            </Grid>

            <!-- Bottom CTA with Enhanced Animation -->
            <Border Grid.Row="2"
                    Height="240"
                    Background="#15ffffff">
                <Border.Effect>
                    <DropShadowEffect Color="#000000"
                                    BlurRadius="30"
                                    ShadowDepth="0"
                                    Opacity="0.3"
                                    Direction="90"/>
                </Border.Effect>
                <Grid>
                    <StackPanel VerticalAlignment="Center"
                               HorizontalAlignment="Center"
                               Margin="0,20,0,0">
                        <TextBlock Text="ì›í•˜ì‹œëŠ” ì˜µì…˜ì„ ì„ íƒí•˜ê³ "
                                  FontSize="28"
                                  Foreground="#99ffffff"
                                  HorizontalAlignment="Center"
                                  Margin="0,0,0,10"/>
                        <TextBlock Text="ì•„ëž˜ ë²„íŠ¼ì„ í„°ì¹˜í•˜ì—¬ ì‹œìž‘í•˜ì„¸ìš”"
                                  FontSize="28"
                                  Foreground="#99ffffff"
                                  HorizontalAlignment="Center"
                                  Margin="0,0,0,35"/>

                        <Button x:Name="TouchStartButton"
                               Content="ì´¬ì˜ ì‹œìž‘í•˜ê¸°"
                               Style="{StaticResource ModernButton}"
                               FontSize="36"
                               Padding="100,28"
                               Click="StartButton_Click"
                               RenderTransformOrigin="0.5,0.5">
                            <Button.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="#FF6B9E" Offset="0"/>
                                    <GradientStop Color="#6B8EFF" Offset="0.5"/>
                                    <GradientStop Color="#FFD76B" Offset="1"/>
                                </LinearGradientBrush>
                            </Button.Background>
                            <Button.RenderTransform>
                                <ScaleTransform/>
                            </Button.RenderTransform>
                            <Button.Effect>
                                <DropShadowEffect Color="#FF6B9E"
                                                BlurRadius="40"
                                                ShadowDepth="0"
                                                Opacity="0.8"/>
                            </Button.Effect>
                        </Button>
                    </StackPanel>

                    <!-- Page Indicators -->
                    <StackPanel Orientation="Horizontal"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Bottom"
                               Margin="0,0,0,30">
                        <Ellipse x:Name="Indicator1"
                                Width="14" Height="14"
                                Fill="#80ffffff"
                                Margin="8"/>
                        <Ellipse x:Name="Indicator2"
                                Width="14" Height="14"
                                Fill="#40ffffff"
                                Margin="8"/>
                        <Ellipse x:Name="Indicator3"
                                Width="14" Height="14"
                                Fill="#40ffffff"
                                Margin="8"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
